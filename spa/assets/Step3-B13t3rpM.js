import{c as u,u as h,a as x,r as i,j as e}from"./index-BCQQ6zpL.js";import{B as c}from"./button-BH4btbcH.js";import{C as f,a as p}from"./card-Ez0Z9LcK.js";import{u as g}from"./useAddChannelFlow-Br0ZUT7p.js";import{C}from"./circle-check-CkBQmFMR.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],v=u("circle-x",j),S=()=>{const a=h(),{t}=x(),{state:n}=g(),s=n.preview;i.useEffect(()=>{if(!s){a("/add-channel/step-1",{replace:!0});return}n.verifyStatus==="idle"&&a("/add-channel/step-2",{replace:!0})},[a,s,n.verifyStatus]);const o=i.useMemo(()=>s?.username?s.username.startsWith("@")?s.username:`@${s.username}`:t("common.emptyValue"),[s?.username,t]),l=n.verifyStatus==="success",m=n.lastError||t("channels.add.step3.defaultError"),r=n.linkedChannelId,d=s&&r?{id:r,username:(s.username||s.normalizedUsername||"").replace(/^@/,""),title:s.title||t("channels.untitled"),status:"VERIFIED",telegramChatId:s.telegramChatId??null,memberCount:s.memberCount??null,verifiedAt:new Date().toISOString(),lastCheckedAt:new Date().toISOString(),membership:{role:"OWNER",telegramAdminStatus:"administrator",lastRecheckAt:new Date().toISOString()}}:null;return s?e.jsxs("div",{className:"flex flex-1 flex-col gap-5",children:[e.jsx(f,{className:"border-border/60 bg-card/80 shadow-sm",children:e.jsxs(p,{className:"flex flex-col items-center gap-3 p-6 text-center",children:[e.jsx("div",{className:`flex h-16 w-16 items-center justify-center rounded-full ${l?"bg-emerald-500/20 text-emerald-400":"bg-destructive/15 text-destructive"}`,children:l?e.jsx(C,{className:"h-8 w-8"}):e.jsx(v,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-foreground",children:t(l?"channels.add.step3.successTitle":"channels.add.step3.failedTitle")}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[s.title," Â· ",o]})]}),l?null:e.jsx("p",{className:"text-xs text-muted-foreground",children:m})]})}),e.jsx("div",{className:"mt-auto flex flex-col gap-3",children:l?e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>a("/channels"),className:"w-full text-sm font-semibold",children:t("channels.add.step3.goToChannels")}),e.jsx(c,{variant:"secondary",onClick:()=>r?a(`/channel-manage/${r}/listings`,{state:d?{channel:d,rootBackTo:"/channels"}:{rootBackTo:"/channels"}}):void 0,className:"w-full text-sm font-semibold",disabled:!r,children:t("channels.add.step3.manageChannel")})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>a("/add-channel/step-2"),className:"w-full text-sm font-semibold",children:t("channels.add.step3.retryVerification")}),e.jsx(c,{variant:"secondary",onClick:()=>a("/channels"),className:"w-full text-sm font-semibold",children:t("channels.add.step3.backToChannels")})]})})]}):null};export{S as default};
