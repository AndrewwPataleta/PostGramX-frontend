import{b as i,m as o,r as n,a as l,j as t}from"./index-zAfQEn9H.js";import{u as m}from"./useQuery-CSXGqviw.js";import{L as d}from"./ListingPreviewDetails-BKqzqSc7.js";import{L as u}from"./LoadingSkeleton-CGJkyIjQ.js";import{P as r}from"./PageContainer-DDyL6h17.js";import{l as c}from"./listingsApi-BRthpQZO.js";import{m as p}from"./managedChannels-FAMZ8sT_.js";import{g as x}from"./errors-3kY4UU5q.js";import{n as g}from"./ton-ClBVV2oW.js";import"./skeleton-B5Y_OuaW.js";function L(){const{id:a}=i(),s=o()?.channel??(a?p[a]:null),e=m({queryKey:["listingsByChannel",a,{page:1,limit:1,onlyActive:!0}],queryFn:()=>c({channelId:a??"",page:1,limit:1,onlyActive:!0,sort:"recent"}),enabled:!!a});return n.useEffect(()=>{e.error&&l.error(x(e.error,"Unable to load listing"))},[e.error]),s?t.jsx("div",{className:"w-full max-w-2xl mx-auto",children:t.jsxs(r,{className:"py-6 space-y-4",children:[e.isLoading?t.jsx(u,{items:1}):e.data?.items?.length?t.jsx(d,{priceTon:Number.parseFloat(g(e.data.items[0].priceNano))||0,format:"POST",pinDurationHours:e.data.items[0].pinDurationHours,visibilityDurationHours:e.data.items[0].visibilityDurationHours,allowEdits:e.data.items[0].allowEdits,allowLinkTracking:e.data.items[0].allowLinkTracking,allowPinnedPlacement:e.data.items[0].allowPinnedPlacement,tags:e.data.items[0].tags,requiresApproval:e.data.items[0].requiresApproval,additionalRequirementsText:e.data.items[0].contentRulesText??""}):t.jsx("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-4 text-sm text-muted-foreground",children:"No listings available to preview yet."}),t.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-4 text-sm text-muted-foreground",children:[t.jsx("p",{className:"font-medium text-foreground",children:"Preview state"}),t.jsx("p",{className:"mt-1",children:"This summary card is used across Marketplace and advertiser requests."})]})]})}):t.jsx("div",{className:"w-full max-w-2xl mx-auto",children:t.jsx(r,{className:"py-6",children:t.jsx("p",{className:"text-muted-foreground",children:"Channel not found"})})})}export{L as default};
