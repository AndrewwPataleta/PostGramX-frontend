import{c as le,r as o,j as e,h as U,X as Jt,G as es,p as ts,l as Ye,m as Ve,n as ss,o as rs,H as os,q as Z,z as ae,P as W,V as ns,A as as,s as O,v as ls,I as Xe,y as is,w as cs,D as ds,C as ps,x as us,J as ms,a as xs,K as fs,M as hs,i as gs,b as re,T as ys}from"./index-BCQQ6zpL.js";import{A as vs,a as bs,b as Ns}from"./avatar-4Rggkv7J.js";import{a as ws,c as Ss}from"./payment-B8-ZYZHF.js";import{u as Ze}from"./useQuery-iFZJMQz6.js";import{E as js}from"./ErrorState-C2o6ti_8.js";import{L as He}from"./LoadingSkeleton-DuFRupyC.js";import{g as Cs}from"./errors-3kY4UU5q.js";import{I as Ce}from"./input-BW-pjz5d.js";import{P as Ts}from"./PageContainer-BzWp3KSK.js";import{R as Is,P as Es,C as Je,a as Ps,T as et,D as tt,O as st}from"./index-D542HDpz.js";import{u as Rs}from"./useInfiniteQuery-BYnJTMBM.js";import{b as _s,e as Os,n as ks}from"./formatters-DrHNNfko.js";import{u as As,c as $e}from"./index-DLhxPnFF.js";import{u as Fe,h as Ms,a as Ds,R as Ls,F as Fs}from"./Combination-BukvS-s6.js";import{C as rt}from"./chevron-down-CUdhyU2O.js";import{C as Us}from"./check-CNXnoQwe.js";import{L as Te}from"./lock-kqFyNCG-.js";import{C as ze}from"./circle-check-CkBQmFMR.js";import"./skeleton-DufSVfEO.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Bs=le("arrow-down-left",Ws);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Hs=le("arrow-up-right",Vs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zs=le("chevron-up",$s);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qs=le("clock",Ks);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Qs=le("history",Gs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ke=le("send",Ys);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zs=le("shield-check",Xs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],er=le("wallet",Js),ot=async(s=250,t=500)=>{const r=Math.floor(Math.random()*(t-s+1))+s;await new Promise(i=>setTimeout(i,r))},nt={balance:{available:124.5,locked:35,pendingRelease:12,instantWithdraw:18},transactions:[{type:"Deposit",amount:"+50 TON",status:"Confirmed",time:"Today · 12:08"},{type:"Escrow Lock",amount:"-35 TON",status:"Pending",time:"Today · 11:42"},{type:"Escrow Release",amount:"+35 TON",status:"Confirmed",time:"Yesterday · 18:20"},{type:"Withdrawal",amount:"-12 TON",status:"Processing",time:"Yesterday · 16:05"},{type:"Refund",amount:"+8 TON",status:"Confirmed",time:"Aug 20 · 09:45"}],topUpAddress:"EQABc7p8sT1h8Q8p2x9K4Qx9nX9z1q8Qx0Qx9nX9z1q8Qx0Qx",topUpMemo:"PGX-TOPUP"};console.info("MOCK MODE ENABLED for Profile");const tr=async()=>(await ot(),nt),sr=async()=>(await ot(),nt.balance),at={all:["profile"],overview:()=>["profile","overview"],balance:()=>["profile","balance"]},rr=()=>Ze({queryKey:at.overview(),queryFn:tr}),or=()=>Ze({queryKey:at.balance(),queryFn:sr}),qe=Is,nr=Es,lt=o.forwardRef(({className:s,...t},r)=>e.jsx(st,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));lt.displayName=st.displayName;const ar=es("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ie=o.forwardRef(({side:s="right",className:t,children:r,...i},a)=>e.jsxs(nr,{children:[e.jsx(lt,{}),e.jsxs(Je,{ref:a,className:U(ar({side:s}),t),...i,children:[r,e.jsxs(Ps,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Jt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ie.displayName=Je.displayName;const Ee=({className:s,...t})=>e.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",s),...t});Ee.displayName="SheetHeader";const Pe=o.forwardRef(({className:s,...t},r)=>e.jsx(et,{ref:r,className:U("text-lg font-semibold text-foreground",s),...t}));Pe.displayName=et.displayName;const Re=o.forwardRef(({className:s,...t},r)=>e.jsx(tt,{ref:r,className:U("text-sm text-muted-foreground",s),...t}));Re.displayName=tt.displayName;const lr=s=>Object.fromEntries(Object.entries(s).filter(([,t])=>t!==void 0));async function ir(s){return ts("/payments/transactions/list",{data:lr({page:s.page??1,limit:Math.min(s.limit??20,50),type:s.type,status:s.status,direction:s.direction,dealId:s.dealId,q:s.q,from:s.from,to:s.to,sort:s.sort??"recent",order:s.order??"desc"})})}function cr(s){return Rs({queryKey:["payments","transactions",s],queryFn:({pageParam:t})=>ir({...s,page:t}),initialPageParam:s.page??1,getNextPageParam:t=>t.hasNext?t.page+1:void 0,keepPreviousData:!0,staleTime:15e3})}function dr(s){const t=o.useRef({value:s,previous:s});return o.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var pr=[" ","Enter","ArrowUp","ArrowDown"],ur=[" ","Enter"],de="Select",[we,Se,mr]=os(de),[xe,co]=rs(de,[mr,Ye]),je=Ye(),[xr,ie]=xe(de),[fr,hr]=xe(de),it=s=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:a,onOpenChange:u,value:l,defaultValue:c,onValueChange:d,dir:f,name:y,autoComplete:v,disabled:C,required:N,form:j}=s,p=je(t),[h,w]=o.useState(null),[m,g]=o.useState(null),[$,M]=o.useState(!1),z=As(f),[T,B]=Ve({prop:i,defaultProp:a??!1,onChange:u,caller:de}),[X,J]=Ve({prop:l,defaultProp:c,onChange:d,caller:de}),K=o.useRef(null),D=h?j||!!h.closest("form"):!0,[L,V]=o.useState(new Set),q=Array.from(L).map(I=>I.props.value).join(";");return e.jsx(ss,{...p,children:e.jsxs(xr,{required:N,scope:t,trigger:h,onTriggerChange:w,valueNode:m,onValueNodeChange:g,valueNodeHasChildren:$,onValueNodeHasChildrenChange:M,contentId:Fe(),value:X,onValueChange:J,open:T,onOpenChange:B,dir:z,triggerPointerDownPosRef:K,disabled:C,children:[e.jsx(we.Provider,{scope:t,children:e.jsx(fr,{scope:s.__scopeSelect,onNativeOptionAdd:o.useCallback(I=>{V(k=>new Set(k).add(I))},[]),onNativeOptionRemove:o.useCallback(I=>{V(k=>{const G=new Set(k);return G.delete(I),G})},[]),children:r})}),D?e.jsxs(Ot,{"aria-hidden":!0,required:N,tabIndex:-1,name:y,autoComplete:v,value:X,onChange:I=>J(I.target.value),disabled:C,form:j,children:[X===void 0?e.jsx("option",{value:""}):null,Array.from(L)]},q):null]})})};it.displayName=de;var ct="SelectTrigger",dt=o.forwardRef((s,t)=>{const{__scopeSelect:r,disabled:i=!1,...a}=s,u=je(r),l=ie(ct,r),c=l.disabled||i,d=Z(t,l.onTriggerChange),f=Se(r),y=o.useRef("touch"),[v,C,N]=At(p=>{const h=f().filter(g=>!g.disabled),w=h.find(g=>g.value===l.value),m=Mt(h,p,w);m!==void 0&&l.onValueChange(m.value)}),j=p=>{c||(l.onOpenChange(!0),N()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(as,{asChild:!0,...u,children:e.jsx(W.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":kt(l.value)?"":void 0,...a,ref:d,onClick:O(a.onClick,p=>{p.currentTarget.focus(),y.current!=="mouse"&&j(p)}),onPointerDown:O(a.onPointerDown,p=>{y.current=p.pointerType;const h=p.target;h.hasPointerCapture(p.pointerId)&&h.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(j(p),p.preventDefault())}),onKeyDown:O(a.onKeyDown,p=>{const h=v.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&C(p.key),!(h&&p.key===" ")&&pr.includes(p.key)&&(j(),p.preventDefault())})})})});dt.displayName=ct;var pt="SelectValue",ut=o.forwardRef((s,t)=>{const{__scopeSelect:r,className:i,style:a,children:u,placeholder:l="",...c}=s,d=ie(pt,r),{onValueNodeHasChildrenChange:f}=d,y=u!==void 0,v=Z(t,d.onValueNodeChange);return ae(()=>{f(y)},[f,y]),e.jsx(W.span,{...c,ref:v,style:{pointerEvents:"none"},children:kt(d.value)?e.jsx(e.Fragment,{children:l}):u})});ut.displayName=pt;var gr="SelectIcon",mt=o.forwardRef((s,t)=>{const{__scopeSelect:r,children:i,...a}=s;return e.jsx(W.span,{"aria-hidden":!0,...a,ref:t,children:i||"▼"})});mt.displayName=gr;var yr="SelectPortal",xt=s=>e.jsx(ls,{asChild:!0,...s});xt.displayName=yr;var pe="SelectContent",ft=o.forwardRef((s,t)=>{const r=ie(pe,s.__scopeSelect),[i,a]=o.useState();if(ae(()=>{a(new DocumentFragment)},[]),!r.open){const u=i;return u?Xe.createPortal(e.jsx(ht,{scope:s.__scopeSelect,children:e.jsx(we.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),u):null}return e.jsx(gt,{...s,ref:t})});ft.displayName=pe;var Y=10,[ht,ce]=xe(pe),vr="SelectContentImpl",br=cs("SelectContent.RemoveScroll"),gt=o.forwardRef((s,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:u,onPointerDownOutside:l,side:c,sideOffset:d,align:f,alignOffset:y,arrowPadding:v,collisionBoundary:C,collisionPadding:N,sticky:j,hideWhenDetached:p,avoidCollisions:h,...w}=s,m=ie(pe,r),[g,$]=o.useState(null),[M,z]=o.useState(null),T=Z(t,x=>$(x)),[B,X]=o.useState(null),[J,K]=o.useState(null),D=Se(r),[L,V]=o.useState(!1),q=o.useRef(!1);o.useEffect(()=>{if(g)return Ms(g)},[g]),Ds();const I=o.useCallback(x=>{const[E,..._]=D().map(P=>P.ref.current),[b]=_.slice(-1),S=document.activeElement;for(const P of x)if(P===S||(P?.scrollIntoView({block:"nearest"}),P===E&&M&&(M.scrollTop=0),P===b&&M&&(M.scrollTop=M.scrollHeight),P?.focus(),document.activeElement!==S))return},[D,M]),k=o.useCallback(()=>I([B,g]),[I,B,g]);o.useEffect(()=>{L&&k()},[L,k]);const{onOpenChange:G,triggerPointerDownPosRef:F}=m;o.useEffect(()=>{if(g){let x={x:0,y:0};const E=b=>{x={x:Math.abs(Math.round(b.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(F.current?.y??0))}},_=b=>{x.x<=10&&x.y<=10?b.preventDefault():g.contains(b.target)||G(!1),document.removeEventListener("pointermove",E),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",E),document.addEventListener("pointerup",_,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",_,{capture:!0})}}},[g,G,F]),o.useEffect(()=>{const x=()=>G(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[G]);const[fe,ee]=At(x=>{const E=D().filter(S=>!S.disabled),_=E.find(S=>S.ref.current===document.activeElement),b=Mt(E,x,_);b&&setTimeout(()=>b.ref.current.focus())}),he=o.useCallback((x,E,_)=>{const b=!q.current&&!_;(m.value!==void 0&&m.value===E||b)&&(X(x),b&&(q.current=!0))},[m.value]),ge=o.useCallback(()=>g?.focus(),[g]),oe=o.useCallback((x,E,_)=>{const b=!q.current&&!_;(m.value!==void 0&&m.value===E||b)&&K(x)},[m.value]),ue=i==="popper"?_e:yt,te=ue===_e?{side:c,sideOffset:d,align:f,alignOffset:y,arrowPadding:v,collisionBoundary:C,collisionPadding:N,sticky:j,hideWhenDetached:p,avoidCollisions:h}:{};return e.jsx(ht,{scope:r,content:g,viewport:M,onViewportChange:z,itemRefCallback:he,selectedItem:B,onItemLeave:ge,itemTextRefCallback:oe,focusSelectedItem:k,selectedItemText:J,position:i,isPositioned:L,searchRef:fe,children:e.jsx(Ls,{as:br,allowPinchZoom:!0,children:e.jsx(Fs,{asChild:!0,trapped:m.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:O(a,x=>{m.trigger?.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(ds,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(ue,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:x=>x.preventDefault(),...w,...te,onPlaced:()=>V(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:O(w.onKeyDown,x=>{const E=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!E&&x.key.length===1&&ee(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let b=D().filter(S=>!S.disabled).map(S=>S.ref.current);if(["ArrowUp","End"].includes(x.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const S=x.target,P=b.indexOf(S);b=b.slice(P+1)}setTimeout(()=>I(b)),x.preventDefault()}})})})})})})});gt.displayName=vr;var Nr="SelectItemAlignedPosition",yt=o.forwardRef((s,t)=>{const{__scopeSelect:r,onPlaced:i,...a}=s,u=ie(pe,r),l=ce(pe,r),[c,d]=o.useState(null),[f,y]=o.useState(null),v=Z(t,T=>y(T)),C=Se(r),N=o.useRef(!1),j=o.useRef(!0),{viewport:p,selectedItem:h,selectedItemText:w,focusSelectedItem:m}=l,g=o.useCallback(()=>{if(u.trigger&&u.valueNode&&c&&f&&p&&h&&w){const T=u.trigger.getBoundingClientRect(),B=f.getBoundingClientRect(),X=u.valueNode.getBoundingClientRect(),J=w.getBoundingClientRect();if(u.dir!=="rtl"){const S=J.left-B.left,P=X.left-S,R=T.left-P,Q=T.width+R,ye=Math.max(Q,B.width),se=window.innerWidth-Y,me=$e(P,[Y,Math.max(Y,se-ye)]);c.style.minWidth=Q+"px",c.style.left=me+"px"}else{const S=B.right-J.right,P=window.innerWidth-X.right-S,R=window.innerWidth-T.right-P,Q=T.width+R,ye=Math.max(Q,B.width),se=window.innerWidth-Y,me=$e(P,[Y,Math.max(Y,se-ye)]);c.style.minWidth=Q+"px",c.style.right=me+"px"}const K=C(),D=window.innerHeight-Y*2,L=p.scrollHeight,V=window.getComputedStyle(f),q=parseInt(V.borderTopWidth,10),I=parseInt(V.paddingTop,10),k=parseInt(V.borderBottomWidth,10),G=parseInt(V.paddingBottom,10),F=q+I+L+G+k,fe=Math.min(h.offsetHeight*5,F),ee=window.getComputedStyle(p),he=parseInt(ee.paddingTop,10),ge=parseInt(ee.paddingBottom,10),oe=T.top+T.height/2-Y,ue=D-oe,te=h.offsetHeight/2,x=h.offsetTop+te,E=q+I+x,_=F-E;if(E<=oe){const S=K.length>0&&h===K[K.length-1].ref.current;c.style.bottom="0px";const P=f.clientHeight-p.offsetTop-p.offsetHeight,R=Math.max(ue,te+(S?ge:0)+P+k),Q=E+R;c.style.height=Q+"px"}else{const S=K.length>0&&h===K[0].ref.current;c.style.top="0px";const R=Math.max(oe,q+p.offsetTop+(S?he:0)+te)+_;c.style.height=R+"px",p.scrollTop=E-oe+p.offsetTop}c.style.margin=`${Y}px 0`,c.style.minHeight=fe+"px",c.style.maxHeight=D+"px",i?.(),requestAnimationFrame(()=>N.current=!0)}},[C,u.trigger,u.valueNode,c,f,p,h,w,u.dir,i]);ae(()=>g(),[g]);const[$,M]=o.useState();ae(()=>{f&&M(window.getComputedStyle(f).zIndex)},[f]);const z=o.useCallback(T=>{T&&j.current===!0&&(g(),m?.(),j.current=!1)},[g,m]);return e.jsx(Sr,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:N,onScrollButtonChange:z,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:e.jsx(W.div,{...a,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});yt.displayName=Nr;var wr="SelectPopperPosition",_e=o.forwardRef((s,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:a=Y,...u}=s,l=je(r);return e.jsx(ps,{...l,...u,ref:t,align:i,collisionPadding:a,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_e.displayName=wr;var[Sr,Ue]=xe(pe,{}),Oe="SelectViewport",vt=o.forwardRef((s,t)=>{const{__scopeSelect:r,nonce:i,...a}=s,u=ce(Oe,r),l=Ue(Oe,r),c=Z(t,u.onViewportChange),d=o.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(we.Slot,{scope:r,children:e.jsx(W.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:O(a.onScroll,f=>{const y=f.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:C}=l;if(C?.current&&v){const N=Math.abs(d.current-y.scrollTop);if(N>0){const j=window.innerHeight-Y*2,p=parseFloat(v.style.minHeight),h=parseFloat(v.style.height),w=Math.max(p,h);if(w<j){const m=w+N,g=Math.min(j,m),$=m-g;v.style.height=g+"px",v.style.bottom==="0px"&&(y.scrollTop=$>0?$:0,v.style.justifyContent="flex-end")}}}d.current=y.scrollTop})})})]})});vt.displayName=Oe;var bt="SelectGroup",[jr,Cr]=xe(bt),Tr=o.forwardRef((s,t)=>{const{__scopeSelect:r,...i}=s,a=Fe();return e.jsx(jr,{scope:r,id:a,children:e.jsx(W.div,{role:"group","aria-labelledby":a,...i,ref:t})})});Tr.displayName=bt;var Nt="SelectLabel",wt=o.forwardRef((s,t)=>{const{__scopeSelect:r,...i}=s,a=Cr(Nt,r);return e.jsx(W.div,{id:a.id,...i,ref:t})});wt.displayName=Nt;var Ne="SelectItem",[Ir,St]=xe(Ne),jt=o.forwardRef((s,t)=>{const{__scopeSelect:r,value:i,disabled:a=!1,textValue:u,...l}=s,c=ie(Ne,r),d=ce(Ne,r),f=c.value===i,[y,v]=o.useState(u??""),[C,N]=o.useState(!1),j=Z(t,m=>d.itemRefCallback?.(m,i,a)),p=Fe(),h=o.useRef("touch"),w=()=>{a||(c.onValueChange(i),c.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Ir,{scope:r,value:i,disabled:a,textId:p,isSelected:f,onItemTextChange:o.useCallback(m=>{v(g=>g||(m?.textContent??"").trim())},[]),children:e.jsx(we.ItemSlot,{scope:r,value:i,disabled:a,textValue:y,children:e.jsx(W.div,{role:"option","aria-labelledby":p,"data-highlighted":C?"":void 0,"aria-selected":f&&C,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:j,onFocus:O(l.onFocus,()=>N(!0)),onBlur:O(l.onBlur,()=>N(!1)),onClick:O(l.onClick,()=>{h.current!=="mouse"&&w()}),onPointerUp:O(l.onPointerUp,()=>{h.current==="mouse"&&w()}),onPointerDown:O(l.onPointerDown,m=>{h.current=m.pointerType}),onPointerMove:O(l.onPointerMove,m=>{h.current=m.pointerType,a?d.onItemLeave?.():h.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:O(l.onPointerLeave,m=>{m.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:O(l.onKeyDown,m=>{d.searchRef?.current!==""&&m.key===" "||(ur.includes(m.key)&&w(),m.key===" "&&m.preventDefault())})})})})});jt.displayName=Ne;var ve="SelectItemText",Ct=o.forwardRef((s,t)=>{const{__scopeSelect:r,className:i,style:a,...u}=s,l=ie(ve,r),c=ce(ve,r),d=St(ve,r),f=hr(ve,r),[y,v]=o.useState(null),C=Z(t,w=>v(w),d.onItemTextChange,w=>c.itemTextRefCallback?.(w,d.value,d.disabled)),N=y?.textContent,j=o.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:N},d.value),[d.disabled,d.value,N]),{onNativeOptionAdd:p,onNativeOptionRemove:h}=f;return ae(()=>(p(j),()=>h(j)),[p,h,j]),e.jsxs(e.Fragment,{children:[e.jsx(W.span,{id:d.textId,...u,ref:C}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Xe.createPortal(u.children,l.valueNode):null]})});Ct.displayName=ve;var Tt="SelectItemIndicator",It=o.forwardRef((s,t)=>{const{__scopeSelect:r,...i}=s;return St(Tt,r).isSelected?e.jsx(W.span,{"aria-hidden":!0,...i,ref:t}):null});It.displayName=Tt;var ke="SelectScrollUpButton",Et=o.forwardRef((s,t)=>{const r=ce(ke,s.__scopeSelect),i=Ue(ke,s.__scopeSelect),[a,u]=o.useState(!1),l=Z(t,i.onScrollButtonChange);return ae(()=>{if(r.viewport&&r.isPositioned){let c=function(){const f=d.scrollTop>0;u(f)};const d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?e.jsx(Rt,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=r;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Et.displayName=ke;var Ae="SelectScrollDownButton",Pt=o.forwardRef((s,t)=>{const r=ce(Ae,s.__scopeSelect),i=Ue(Ae,s.__scopeSelect),[a,u]=o.useState(!1),l=Z(t,i.onScrollButtonChange);return ae(()=>{if(r.viewport&&r.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,y=Math.ceil(d.scrollTop)<f;u(y)};const d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?e.jsx(Rt,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=r;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Pt.displayName=Ae;var Rt=o.forwardRef((s,t)=>{const{__scopeSelect:r,onAutoScroll:i,...a}=s,u=ce("SelectScrollButton",r),l=o.useRef(null),c=Se(r),d=o.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return o.useEffect(()=>()=>d(),[d]),ae(()=>{c().find(y=>y.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),e.jsx(W.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:O(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(i,50))}),onPointerMove:O(a.onPointerMove,()=>{u.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(i,50))}),onPointerLeave:O(a.onPointerLeave,()=>{d()})})}),Er="SelectSeparator",_t=o.forwardRef((s,t)=>{const{__scopeSelect:r,...i}=s;return e.jsx(W.div,{"aria-hidden":!0,...i,ref:t})});_t.displayName=Er;var Me="SelectArrow",Pr=o.forwardRef((s,t)=>{const{__scopeSelect:r,...i}=s,a=je(r),u=ie(Me,r),l=ce(Me,r);return u.open&&l.position==="popper"?e.jsx(us,{...a,...i,ref:t}):null});Pr.displayName=Me;var Rr="SelectBubbleInput",Ot=o.forwardRef(({__scopeSelect:s,value:t,...r},i)=>{const a=o.useRef(null),u=Z(i,a),l=dr(t);return o.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==t&&y){const v=new Event("change",{bubbles:!0});y.call(c,t),c.dispatchEvent(v)}},[l,t]),e.jsx(W.select,{...r,style:{...ns,...r.style},ref:u,defaultValue:t})});Ot.displayName=Rr;function kt(s){return s===""||s===void 0}function At(s){const t=is(s),r=o.useRef(""),i=o.useRef(0),a=o.useCallback(l=>{const c=r.current+l;t(c),function d(f){r.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),u=o.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,a,u]}function Mt(s,t,r){const a=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,u=r?s.indexOf(r):-1;let l=_r(s,Math.max(u,0));a.length===1&&(l=l.filter(f=>f!==r));const d=l.find(f=>f.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==r?d:void 0}function _r(s,t){return s.map((r,i)=>s[(t+i)%s.length])}var Or=it,Dt=dt,kr=ut,Ar=mt,Mr=xt,Lt=ft,Dr=vt,Ft=wt,Ut=jt,Lr=Ct,Fr=It,Wt=Et,Bt=Pt,Vt=_t;const Ge=Or,Qe=kr,De=o.forwardRef(({className:s,children:t,...r},i)=>e.jsxs(Dt,{ref:i,className:U("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(Ar,{asChild:!0,children:e.jsx(rt,{className:"h-4 w-4 opacity-50"})})]}));De.displayName=Dt.displayName;const Ht=o.forwardRef(({className:s,...t},r)=>e.jsx(Wt,{ref:r,className:U("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(zs,{className:"h-4 w-4"})}));Ht.displayName=Wt.displayName;const $t=o.forwardRef(({className:s,...t},r)=>e.jsx(Bt,{ref:r,className:U("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(rt,{className:"h-4 w-4"})}));$t.displayName=Bt.displayName;const Le=o.forwardRef(({className:s,children:t,position:r="popper",...i},a)=>e.jsx(Mr,{children:e.jsxs(Lt,{ref:a,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...i,children:[e.jsx(Ht,{}),e.jsx(Dr,{className:U("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx($t,{})]})}));Le.displayName=Lt.displayName;const Ur=o.forwardRef(({className:s,...t},r)=>e.jsx(Ft,{ref:r,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Ur.displayName=Ft.displayName;const H=o.forwardRef(({className:s,children:t,...r},i)=>e.jsxs(Ut,{ref:i,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Fr,{children:e.jsx(Us,{className:"h-4 w-4"})})}),e.jsx(Lr,{children:t})]}));H.displayName=Ut.displayName;const Wr=o.forwardRef(({className:s,...t},r)=>e.jsx(Vt,{ref:r,className:U("-mx-1 my-1 h-px bg-muted",s),...t}));Wr.displayName=Vt.displayName;const Br={PENDING:"bg-amber-500/15 text-amber-300",AWAITING_CONFIRMATION:"bg-sky-500/15 text-sky-300",CONFIRMED:"bg-emerald-500/15 text-emerald-300",COMPLETED:"bg-emerald-500/15 text-emerald-300",FAILED:"bg-rose-500/15 text-rose-300",CANCELED:"bg-rose-500/15 text-rose-300"},Vr=[10,25,50],Hr=[5,10,20];function po(){const{user:s}=ms(),{t,language:r,setLanguage:i}=xs(),[a,u]=o.useState("history"),{data:l,isLoading:c,error:d,refetch:f}=rr(),{data:y}=or(),[v,C]=o.useState(0),[N,j]=o.useState(50),[p,h]=o.useState("50"),[w,m]=o.useState("idle"),[g,$]=o.useState(!1),[M,z]=o.useState(!1),[T,B]=o.useState(18),[X,J]=o.useState("18"),[K,D]=o.useState("idle"),[L,V]=o.useState(!1),[q,I]=o.useState(!1),[k,G]=o.useState("all"),[F,fe]=o.useState("all"),[ee,he]=o.useState(""),ge=fs(),[oe]=hs(),{open:ue}=gs(),te=s?`${s.first_name}${s.last_name?` ${s.last_name}`:""}`:t("profile.displayNameFallback"),x=s?.username?`@${s.username}`:t("profile.usernameFallback"),E=te.split(" ").filter(Boolean).slice(0,2).map(n=>n[0]?.toUpperCase()).join(""),_=l?.balance,b=l?.topUpAddress??"—",S=l?.topUpMemo??"—",P=o.useMemo(()=>({page:1,limit:20,sort:"recent",order:"desc",status:k==="all"?void 0:k,type:F==="all"?void 0:F,q:ee.trim()?ee.trim():void 0}),[k,F,ee]),R=cr(P),Q=o.useMemo(()=>R.data?.pages.flatMap(n=>n.items)??[],[R.data]),ye=R.isLoading||R.isFetching&&Q.length===0,se=R.error instanceof Error?R.error:null;o.useEffect(()=>{l&&C(l.balance.available)},[l]),o.useEffect(()=>{y&&C(y.available)},[y]),o.useEffect(()=>{se&&re.error(se.message)},[se]);const me=n=>{h(n);const A=Number(n);Number.isFinite(A)&&j(A)},be=n=>{J(n);const A=Number(n);Number.isFinite(A)&&B(A)},We=async()=>{if(!Number.isFinite(N)||N<=0){re.error(t("profile.toastSelectValidTopUp"));return}if(!ge){ue(),re.info(t("profile.toastConnectWallet"));return}$(!0),m("pending");try{await oe.sendTransaction(Ss({address:b,amountTon:N})),C(n=>Number((n+N).toFixed(2))),m("confirmed"),z(!1),re.success(t("profile.toastTopUpConfirmed"))}catch(n){m("idle"),re.error(n instanceof Error?n.message:t("profile.toastTopUpFailed"))}finally{$(!1)}},zt=async()=>{if(!Number.isFinite(T)||T<=0){re.error(t("profile.toastSelectValidWithdraw"));return}if(T>v){re.error(t("profile.toastInsufficientBalance"));return}V(!0),D("pending");try{C(n=>Number(Math.max(n-T,0).toFixed(2))),D("confirmed"),I(!1),re.success(t("profile.toastWithdrawSubmitted"))}catch(n){D("idle"),re.error(n instanceof Error?n.message:t("profile.toastWithdrawFailed"))}finally{V(!1)}},Kt=ws({address:b,amountTon:N,memo:S}),qt=n=>{try{return Os(ks(BigInt(n)))}catch{return n}},Gt=n=>{switch(n){case"DEPOSIT":return"Deposit";case"WITHDRAW":return"Withdraw";case"ESCROW_HOLD":return"Escrow hold";case"ESCROW_RELEASE":return"Escrow release";case"ESCROW_REFUND":return"Escrow refund";case"FEE":return"Fee";default:return n}},Qt=n=>{switch(n){case"PENDING":return"Pending";case"AWAITING_CONFIRMATION":return"Awaiting confirmation";case"CONFIRMED":return"Confirmed";case"COMPLETED":return"Completed";case"FAILED":return"Failed";case"CANCELED":return"Canceled";default:return n}},Be=(n,A=6,ne=4)=>n.length<=A+ne?n:`${n.slice(0,A)}...${n.slice(-ne)}`,Yt=n=>n.description?n.description:n.dealId?`Deal: ${Be(n.dealId)}`:n.externalTxHash?Be(n.externalTxHash):"",Xt=n=>n.type.startsWith("ESCROW")?Te:n.direction==="IN"?Bs:n.direction==="OUT"?Hs:Ke,Zt=n=>{const A=qt(n.amountNano);return`${n.direction==="OUT"?"-":n.direction==="IN"?"+":""}${A} ${n.currency}`};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(Ts,{className:"py-6 space-y-6",children:c?e.jsx(He,{items:2}):d?e.jsx(js,{message:Cs(d,"Unable to load profile"),description:"Please reconnect your session and try again.",onRetry:()=>f()}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(vs,{className:"h-14 w-14",children:[e.jsx(bs,{src:s?.photo_url,alt:te}),e.jsx(Ns,{className:"bg-primary/15 text-primary text-lg font-semibold",children:E||"TG"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:te}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x}),e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full bg-secondary/60 px-3 py-1 text-[11px] font-medium text-muted-foreground",children:[e.jsx(Zs,{size:14,className:"text-primary/80"}),t("profile.connectedViaTelegram")]})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[340px_1fr]",children:[e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-20 lg:self-start",children:[e.jsxs("div",{className:"relative rounded-[28px] border border-border/40 bg-background/70 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-border/40 flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t("profile.walletSummary")}),e.jsx(ys,{className:"shrink-0"})]}),e.jsxs("div",{className:"px-5 py-5 space-y-4 pb-6",children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.balanceLabel")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-2xl font-semibold text-foreground",children:[t("profile.availableBalance")," ",v.toFixed(2)," TON"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[t("profile.lockedInEscrow")," ",_?.locked??0," ","TON"]}),e.jsxs("span",{children:[t("profile.pendingRelease")," ",_?.pendingRelease??0," TON"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.lockedFundsNote")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",className:"button-primary rounded-lg py-2 text-sm",onClick:()=>{u("topup"),z(!0)},children:t("profile.topUp")}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-2 text-sm bg-primary/80 hover:bg-primary",onClick:()=>{u("withdraw"),I(!0)},children:t("profile.withdraw")})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.instantWithdraw")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:[_?.instantWithdraw?.toFixed(2)??"0.00"," TON"]}),e.jsx("button",{type:"button",className:"rounded-lg border border-border/40 px-3 py-1 text-xs text-muted-foreground",onClick:()=>{u("withdraw"),I(!0)},children:t("profile.withdrawNow")})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:t("profile.savedWallet")})]})]})]}),e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t("profile.language")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.languageDescription")})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"en",label:t("profile.languageOptionEnglish")},{value:"ru",label:t("profile.languageOptionRussian")}].map(n=>e.jsx("button",{type:"button",onClick:()=>i(n.value),className:`rounded-lg border px-3 py-1 text-xs transition ${r===n.value?"border-primary/60 bg-primary/20 text-primary":"border-border/40 text-muted-foreground hover:text-foreground"}`,children:n.label},n.value))})]})]}),e.jsxs("div",{className:"rounded-[28px] border border-border/40 bg-background/70 shadow-xl overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-border/40",children:e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:[{id:"history",label:t("profile.sectionHistory"),icon:Qs},{id:"escrow",label:t("profile.sectionEscrow"),icon:Te}].map(({id:n,label:A,icon:ne})=>e.jsxs("button",{type:"button",onClick:()=>{n==="topup"&&z(!0),u(n)},className:`inline-flex items-center gap-2 rounded-lg border px-3 py-1 text-xs font-medium transition ${a===n?"border-primary/60 bg-primary/15 text-primary":"border-border/40 text-muted-foreground hover:text-foreground"}`,children:[e.jsx(ne,{size:14}),A]},n))})}),e.jsxs("div",{className:"px-5 py-5 space-y-4 pb-8",children:[a==="history"&&e.jsxs("div",{className:"glass p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t("profile.transactionHistory")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t("profile.last7Days")})]}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-[180px_180px_1fr]",children:[e.jsxs(Ge,{value:k,onValueChange:n=>G(n),children:[e.jsx(De,{className:"h-10 rounded-lg bg-background/70",children:e.jsx(Qe,{placeholder:"Status"})}),e.jsxs(Le,{children:[e.jsx(H,{value:"all",children:"All statuses"}),e.jsx(H,{value:"PENDING",children:"Pending"}),e.jsx(H,{value:"COMPLETED",children:"Completed"}),e.jsx(H,{value:"FAILED",children:"Failed"}),e.jsx(H,{value:"CANCELED",children:"Canceled"})]})]}),e.jsxs(Ge,{value:F,onValueChange:n=>fe(n),children:[e.jsx(De,{className:"h-10 rounded-lg bg-background/70",children:e.jsx(Qe,{placeholder:"Type"})}),e.jsxs(Le,{children:[e.jsx(H,{value:"all",children:"All types"}),e.jsx(H,{value:"DEPOSIT",children:"Deposit"}),e.jsx(H,{value:"WITHDRAW",children:"Withdraw"}),e.jsx(H,{value:"ESCROW_HOLD",children:"Escrow hold"}),e.jsx(H,{value:"ESCROW_REFUND",children:"Refund"}),e.jsx(H,{value:"FEE",children:"Fee"})]})]}),e.jsx(Ce,{value:ee,onChange:n=>he(n.target.value),placeholder:"Search transactions",className:"h-10 rounded-lg bg-background/70"})]}),se?e.jsx("p",{className:"text-xs text-rose-200",children:se.message}):null,ye?e.jsx(He,{items:3}):Q.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No transactions yet"}):e.jsx("div",{className:"space-y-3",children:Q.map(n=>{const A=Xt(n),ne=Yt(n);return e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-border/30 pb-3 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 inline-flex h-9 w-9 items-center justify-center rounded-full bg-secondary/60 text-muted-foreground",children:e.jsx(A,{size:16})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"rounded-full bg-secondary/60 px-2 py-0.5 text-[11px] text-muted-foreground",children:Gt(n.type)}),e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[11px] ${Br[n.status]??"bg-muted text-muted-foreground"}`,children:Qt(n.status)})]}),ne?e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ne}):null,e.jsx("p",{className:"text-[11px] text-muted-foreground mt-1",children:_s(n.createdAt,r)})]})]}),e.jsx("p",{className:"text-sm font-semibold text-foreground",children:Zt(n)})]},n.id)})}),R.hasNextPage?e.jsx("button",{type:"button",onClick:()=>R.fetchNextPage(),disabled:R.isFetchingNextPage,className:"w-full rounded-lg border border-border/40 px-3 py-2 text-xs font-semibold text-muted-foreground transition hover:text-foreground disabled:opacity-60",children:R.isFetchingNextPage?"Loading...":"Load more"}):null]}),a==="topup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.topUpBalance")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("profile.tonAmount")}),e.jsxs("p",{className:"text-2xl font-semibold text-foreground",children:[N.toFixed(2)," TON"]})]}),e.jsx(er,{size:20,className:"text-primary/80"})]}),e.jsx("button",{type:"button",className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-1 text-xs text-primary/80 transition hover:border-primary/60 hover:bg-primary/20",onClick:()=>z(!0),children:"Change amount"})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.paymentMethod")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:t("profile.tonWallet")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.payUsing")})]}),e.jsx("span",{className:"rounded-full bg-secondary/60 px-3 py-1 text-[11px] text-muted-foreground",children:t("profile.selected")})]})]}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:We,disabled:g,children:t(g?"profile.processing":"profile.proceedToPayment")}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.paymentInstructions")}),e.jsxs("div",{className:"space-y-1 text-sm text-foreground",children:[e.jsx("p",{children:Kt}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t("profile.address")," ",b]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t("profile.memo")," ",S]})]})]}),w==="pending"?e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-primary/30 bg-primary/10 px-4 py-3 text-xs text-primary",children:[e.jsx(qs,{size:14}),t("profile.waitingConfirmation")]}):null,w==="confirmed"?e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-200",children:[e.jsx(ze,{size:14}),t("profile.topUpConfirmed")]}):null]}),a==="withdraw"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.withdrawFunds")}),e.jsxs("p",{className:"text-2xl font-semibold text-foreground",children:[T.toFixed(2)," TON"]})]}),e.jsx("button",{type:"button",className:"rounded-lg border border-border/40 px-3 py-1 text-xs text-muted-foreground",onClick:()=>be(v.toFixed(2)),children:t("profile.max")})]}),e.jsx("button",{type:"button",className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-1 text-xs text-primary/80 transition hover:border-primary/60 hover:bg-primary/20",onClick:()=>I(!0),children:t("profile.changeAmount")})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.destinationWallet")}),e.jsx("p",{className:"text-sm text-foreground",children:"EQB7...m0fLr"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:t("profile.networkFeeEstimate")}),e.jsx("span",{children:"~0.05 TON"})]}),e.jsx("div",{className:"rounded-2xl border border-amber-400/30 bg-amber-500/10 px-4 py-3 text-xs text-amber-200",children:t("profile.withdrawWarning")}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:()=>I(!0),disabled:L,children:t(L?"profile.processing":"profile.withdrawAction")}),K==="confirmed"?e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-200",children:[e.jsx(ze,{size:14}),t("profile.withdrawSubmitted")]}):null]}),a==="escrow"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[e.jsx(Te,{size:16,className:"text-primary/80"}),e.jsx("p",{className:"text-sm font-semibold",children:t("profile.howEscrowWorks")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("profile.escrowDescription")})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.trustIndicators")}),e.jsx("div",{className:"grid gap-2",children:[t("profile.trustIndicatorTonNetwork"),t("profile.trustIndicatorOnChainVerification"),t("profile.trustIndicatorAutomatedEscrow"),t("profile.trustIndicatorSmartContractTransparency")].map(n=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-primary"}),e.jsx("span",{className:"text-foreground",children:n})]},n))})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ke,{size:14,className:"text-primary/70"}),t("profile.automatedReleases")]})]})]})]})]})]})}),e.jsx(qe,{open:M,onOpenChange:z,children:e.jsxs(Ie,{side:"bottom",className:"rounded-t-3xl border-t border-border/60 bg-background/95 px-5 pb-8 pt-6",children:[e.jsxs(Ee,{className:"text-left",children:[e.jsx(Pe,{children:"Top up balance"}),e.jsx(Re,{children:"Enter the TON amount you want to add to your wallet."})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Amount (TON)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{type:"number",inputMode:"decimal",min:"0",step:"0.01",value:p,onChange:n=>me(n.target.value),className:"h-12 rounded-2xl text-lg",placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"TON"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Vr.map(n=>e.jsxs("button",{type:"button",onClick:()=>me(n.toString()),className:`rounded-lg border px-3 py-1 text-xs transition ${N===n?"border-primary/60 bg-primary/20 text-primary":"border-primary/40 bg-primary/10 text-primary/80"}`,children:["+",n," TON"]},n))}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:We,disabled:g,children:g?"Processing...":"Top up"})]})]})}),e.jsx(qe,{open:q,onOpenChange:I,children:e.jsxs(Ie,{side:"bottom",className:"rounded-t-3xl border-t border-border/60 bg-background/95 px-5 pb-8 pt-6",children:[e.jsxs(Ee,{className:"text-left",children:[e.jsx(Pe,{children:t("profile.withdrawSheetTitle")}),e.jsx(Re,{children:t("profile.withdrawSheetDescription")})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:t("profile.tonAmount")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{type:"number",inputMode:"decimal",min:"0",step:"0.01",value:X,onChange:n=>be(n.target.value),className:"h-12 rounded-2xl text-lg",placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"TON"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Hr.map(n=>e.jsxs("button",{type:"button",onClick:()=>be(n.toString()),className:`rounded-lg border px-3 py-1 text-xs transition ${T===n?"border-primary/60 bg-primary/20 text-primary":"border-primary/40 bg-primary/10 text-primary/80"}`,children:[n," TON"]},n)),e.jsx("button",{type:"button",onClick:()=>be(v.toFixed(2)),className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-1 text-xs text-primary/80 transition hover:border-primary/60 hover:bg-primary/20",children:t("profile.max")})]}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:zt,disabled:L,children:t(L?"profile.processing":"profile.withdrawAction")})]})]})})]})}export{po as default};
