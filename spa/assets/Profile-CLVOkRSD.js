import{c as ce,r,j as e,h as B,X as rs,H as ns,p as as,m as tt,n as qe,o as ls,q as is,I as cs,s as ee,B as ie,P as H,V as ds,A as ps,t as A,w as us,J as st,z as ms,x as xs,D as fs,C as hs,y as gs,K as ys,a as vs,M as bs,N as Ns,i as ws,b as ne,T as Ss}from"./index-hL3AzeaV.js";import{A as js,a as Ts,b as Cs}from"./avatar-DdS9M5tv.js";import{a as Is,c as Es}from"./payment-B8-ZYZHF.js";import{u as ot}from"./useQuery-84lU0rAQ.js";import{E as Ps}from"./ErrorState-CWOptztJ.js";import{L as Ge}from"./LoadingSkeleton-BMNctmzo.js";import{g as Rs}from"./errors-3kY4UU5q.js";import{I as Re}from"./input-DG6tBJtM.js";import{P as _s}from"./PageContainer-Cm-a9C2U.js";import{R as As,P as Os,C as rt,a as ks,T as nt,D as at,O as lt}from"./index-BQHW44u3.js";import{u as Ms}from"./useInfiniteQuery-pAJdBLvE.js";import{b as Ds,e as Ls,n as Fs}from"./formatters-DrHNNfko.js";import{u as Us,c as Qe}from"./index-DhSgTxf3.js";import{u as Ve,h as Ws,a as Bs,R as Hs,F as Vs}from"./Combination-BTwFOyC8.js";import{C as it}from"./chevron-down-CELqZ4uK.js";import{C as $s}from"./check-1sQ1verD.js";import{T as we,a as M,b as he,c as W,d as Te}from"./ui-DLTU_43L.js";import{L as _e}from"./lock-BQRlBo8f.js";import{C as Ye}from"./circle-check-DaxFvY73.js";import"./skeleton-DaPwmbOO.js";import"./deals-CwuN94JF.js";import"./channels-CCH0-4EZ.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Ks=ce("arrow-down-left",zs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Gs=ce("arrow-up-right",qs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ys=ce("chevron-up",Qs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zs=ce("clock",Xs);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],eo=ce("history",Js);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xe=ce("send",to);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],oo=ce("shield-check",so);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],no=ce("wallet",ro),ct=async(s=250,t=500)=>{const o=Math.floor(Math.random()*(t-s+1))+s;await new Promise(i=>setTimeout(i,o))},dt={balance:{available:124.5,locked:35,pendingRelease:12,instantWithdraw:18},transactions:[{type:"Deposit",amount:"+50 TON",status:"Confirmed",time:"Today · 12:08"},{type:"Escrow Lock",amount:"-35 TON",status:"Pending",time:"Today · 11:42"},{type:"Escrow Release",amount:"+35 TON",status:"Confirmed",time:"Yesterday · 18:20"},{type:"Withdrawal",amount:"-12 TON",status:"Processing",time:"Yesterday · 16:05"},{type:"Refund",amount:"+8 TON",status:"Confirmed",time:"Aug 20 · 09:45"}],topUpAddress:"EQABc7p8sT1h8Q8p2x9K4Qx9nX9z1q8Qx0Qx9nX9z1q8Qx0Qx",topUpMemo:"PGX-TOPUP"};console.info("MOCK MODE ENABLED for Profile");const ao=async()=>(await ct(),dt),lo=async()=>(await ct(),dt.balance),pt={all:["profile"],overview:()=>["profile","overview"],balance:()=>["profile","balance"]},io=()=>ot({queryKey:pt.overview(),queryFn:ao}),co=()=>ot({queryKey:pt.balance(),queryFn:lo}),Ze=As,po=Os,ut=r.forwardRef(({className:s,...t},o)=>e.jsx(lt,{className:B("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:o}));ut.displayName=lt.displayName;const uo=ns("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ae=r.forwardRef(({side:s="right",className:t,children:o,...i},a)=>e.jsxs(po,{children:[e.jsx(ut,{}),e.jsxs(rt,{ref:a,className:B(uo({side:s}),t),...i,children:[o,e.jsxs(ks,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ae.displayName=rt.displayName;const Oe=({className:s,...t})=>e.jsx("div",{className:B("flex flex-col space-y-2 text-center sm:text-left",s),...t});Oe.displayName="SheetHeader";const ke=r.forwardRef(({className:s,...t},o)=>e.jsx(nt,{ref:o,className:B("text-lg font-semibold text-foreground",s),...t}));ke.displayName=nt.displayName;const Me=r.forwardRef(({className:s,...t},o)=>e.jsx(at,{ref:o,className:B("text-sm text-muted-foreground",s),...t}));Me.displayName=at.displayName;const mo=s=>Object.fromEntries(Object.entries(s).filter(([,t])=>t!==void 0));async function xo(s){return as("/payments/transactions/list",{data:mo({page:s.page??1,limit:Math.min(s.limit??20,50),type:s.type,status:s.status,direction:s.direction,dealId:s.dealId,q:s.q,from:s.from,to:s.to,sort:s.sort??"recent",order:s.order??"desc"})})}function fo(s){return Ms({queryKey:["payments","transactions",s],queryFn:({pageParam:t})=>xo({...s,page:t}),initialPageParam:s.page??1,getNextPageParam:t=>t.hasNext?t.page+1:void 0,keepPreviousData:!0,staleTime:15e3})}function ho(s){const t=r.useRef({value:s,previous:s});return r.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var go=[" ","Enter","ArrowUp","ArrowDown"],yo=[" ","Enter"],ue="Select",[Ie,Ee,vo]=cs(ue),[ge,yr]=is(ue,[vo,tt]),Pe=tt(),[bo,de]=ge(ue),[No,wo]=ge(ue),mt=s=>{const{__scopeSelect:t,children:o,open:i,defaultOpen:a,onOpenChange:u,value:l,defaultValue:c,onValueChange:d,dir:f,name:y,autoComplete:v,disabled:T,required:N,form:j}=s,p=Pe(t),[h,w]=r.useState(null),[m,g]=r.useState(null),[K,D]=r.useState(!1),q=Us(f),[C,V]=qe({prop:i,defaultProp:a??!1,onChange:u,caller:ue}),[J,te]=qe({prop:l,defaultProp:c,onChange:d,caller:ue}),G=r.useRef(null),L=h?j||!!h.closest("form"):!0,[F,$]=r.useState(new Set),Q=Array.from(F).map(I=>I.props.value).join(";");return e.jsx(ls,{...p,children:e.jsxs(bo,{required:N,scope:t,trigger:h,onTriggerChange:w,valueNode:m,onValueNodeChange:g,valueNodeHasChildren:K,onValueNodeHasChildrenChange:D,contentId:Ve(),value:J,onValueChange:te,open:C,onOpenChange:V,dir:q,triggerPointerDownPosRef:G,disabled:T,children:[e.jsx(Ie.Provider,{scope:t,children:e.jsx(No,{scope:s.__scopeSelect,onNativeOptionAdd:r.useCallback(I=>{$(O=>new Set(O).add(I))},[]),onNativeOptionRemove:r.useCallback(I=>{$(O=>{const Y=new Set(O);return Y.delete(I),Y})},[]),children:o})}),L?e.jsxs(Lt,{"aria-hidden":!0,required:N,tabIndex:-1,name:y,autoComplete:v,value:J,onChange:I=>te(I.target.value),disabled:T,form:j,children:[J===void 0?e.jsx("option",{value:""}):null,Array.from(F)]},Q):null]})})};mt.displayName=ue;var xt="SelectTrigger",ft=r.forwardRef((s,t)=>{const{__scopeSelect:o,disabled:i=!1,...a}=s,u=Pe(o),l=de(xt,o),c=l.disabled||i,d=ee(t,l.onTriggerChange),f=Ee(o),y=r.useRef("touch"),[v,T,N]=Ut(p=>{const h=f().filter(g=>!g.disabled),w=h.find(g=>g.value===l.value),m=Wt(h,p,w);m!==void 0&&l.onValueChange(m.value)}),j=p=>{c||(l.onOpenChange(!0),N()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(ps,{asChild:!0,...u,children:e.jsx(H.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Ft(l.value)?"":void 0,...a,ref:d,onClick:A(a.onClick,p=>{p.currentTarget.focus(),y.current!=="mouse"&&j(p)}),onPointerDown:A(a.onPointerDown,p=>{y.current=p.pointerType;const h=p.target;h.hasPointerCapture(p.pointerId)&&h.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(j(p),p.preventDefault())}),onKeyDown:A(a.onKeyDown,p=>{const h=v.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&T(p.key),!(h&&p.key===" ")&&go.includes(p.key)&&(j(),p.preventDefault())})})})});ft.displayName=xt;var ht="SelectValue",gt=r.forwardRef((s,t)=>{const{__scopeSelect:o,className:i,style:a,children:u,placeholder:l="",...c}=s,d=de(ht,o),{onValueNodeHasChildrenChange:f}=d,y=u!==void 0,v=ee(t,d.onValueNodeChange);return ie(()=>{f(y)},[f,y]),e.jsx(H.span,{...c,ref:v,style:{pointerEvents:"none"},children:Ft(d.value)?e.jsx(e.Fragment,{children:l}):u})});gt.displayName=ht;var So="SelectIcon",yt=r.forwardRef((s,t)=>{const{__scopeSelect:o,children:i,...a}=s;return e.jsx(H.span,{"aria-hidden":!0,...a,ref:t,children:i||"▼"})});yt.displayName=So;var jo="SelectPortal",vt=s=>e.jsx(us,{asChild:!0,...s});vt.displayName=jo;var me="SelectContent",bt=r.forwardRef((s,t)=>{const o=de(me,s.__scopeSelect),[i,a]=r.useState();if(ie(()=>{a(new DocumentFragment)},[]),!o.open){const u=i;return u?st.createPortal(e.jsx(Nt,{scope:s.__scopeSelect,children:e.jsx(Ie.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),u):null}return e.jsx(wt,{...s,ref:t})});bt.displayName=me;var Z=10,[Nt,pe]=ge(me),To="SelectContentImpl",Co=xs("SelectContent.RemoveScroll"),wt=r.forwardRef((s,t)=>{const{__scopeSelect:o,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:u,onPointerDownOutside:l,side:c,sideOffset:d,align:f,alignOffset:y,arrowPadding:v,collisionBoundary:T,collisionPadding:N,sticky:j,hideWhenDetached:p,avoidCollisions:h,...w}=s,m=de(me,o),[g,K]=r.useState(null),[D,q]=r.useState(null),C=ee(t,x=>K(x)),[V,J]=r.useState(null),[te,G]=r.useState(null),L=Ee(o),[F,$]=r.useState(!1),Q=r.useRef(!1);r.useEffect(()=>{if(g)return Ws(g)},[g]),Bs();const I=r.useCallback(x=>{const[E,..._]=L().map(P=>P.ref.current),[b]=_.slice(-1),S=document.activeElement;for(const P of x)if(P===S||(P?.scrollIntoView({block:"nearest"}),P===E&&D&&(D.scrollTop=0),P===b&&D&&(D.scrollTop=D.scrollHeight),P?.focus(),document.activeElement!==S))return},[L,D]),O=r.useCallback(()=>I([V,g]),[I,V,g]);r.useEffect(()=>{F&&O()},[F,O]);const{onOpenChange:Y,triggerPointerDownPosRef:U}=m;r.useEffect(()=>{if(g){let x={x:0,y:0};const E=b=>{x={x:Math.abs(Math.round(b.pageX)-(U.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(U.current?.y??0))}},_=b=>{x.x<=10&&x.y<=10?b.preventDefault():g.contains(b.target)||Y(!1),document.removeEventListener("pointermove",E),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",E),document.addEventListener("pointerup",_,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",_,{capture:!0})}}},[g,Y,U]),r.useEffect(()=>{const x=()=>Y(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[Y]);const[ye,se]=Ut(x=>{const E=L().filter(S=>!S.disabled),_=E.find(S=>S.ref.current===document.activeElement),b=Wt(E,x,_);b&&setTimeout(()=>b.ref.current.focus())}),ve=r.useCallback((x,E,_)=>{const b=!Q.current&&!_;(m.value!==void 0&&m.value===E||b)&&(J(x),b&&(Q.current=!0))},[m.value]),be=r.useCallback(()=>g?.focus(),[g]),ae=r.useCallback((x,E,_)=>{const b=!Q.current&&!_;(m.value!==void 0&&m.value===E||b)&&G(x)},[m.value]),xe=i==="popper"?De:St,oe=xe===De?{side:c,sideOffset:d,align:f,alignOffset:y,arrowPadding:v,collisionBoundary:T,collisionPadding:N,sticky:j,hideWhenDetached:p,avoidCollisions:h}:{};return e.jsx(Nt,{scope:o,content:g,viewport:D,onViewportChange:q,itemRefCallback:ve,selectedItem:V,onItemLeave:be,itemTextRefCallback:ae,focusSelectedItem:O,selectedItemText:te,position:i,isPositioned:F,searchRef:ye,children:e.jsx(Hs,{as:Co,allowPinchZoom:!0,children:e.jsx(Vs,{asChild:!0,trapped:m.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:A(a,x=>{m.trigger?.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(fs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(xe,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:x=>x.preventDefault(),...w,...oe,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:A(w.onKeyDown,x=>{const E=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!E&&x.key.length===1&&se(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let b=L().filter(S=>!S.disabled).map(S=>S.ref.current);if(["ArrowUp","End"].includes(x.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const S=x.target,P=b.indexOf(S);b=b.slice(P+1)}setTimeout(()=>I(b)),x.preventDefault()}})})})})})})});wt.displayName=To;var Io="SelectItemAlignedPosition",St=r.forwardRef((s,t)=>{const{__scopeSelect:o,onPlaced:i,...a}=s,u=de(me,o),l=pe(me,o),[c,d]=r.useState(null),[f,y]=r.useState(null),v=ee(t,C=>y(C)),T=Ee(o),N=r.useRef(!1),j=r.useRef(!0),{viewport:p,selectedItem:h,selectedItemText:w,focusSelectedItem:m}=l,g=r.useCallback(()=>{if(u.trigger&&u.valueNode&&c&&f&&p&&h&&w){const C=u.trigger.getBoundingClientRect(),V=f.getBoundingClientRect(),J=u.valueNode.getBoundingClientRect(),te=w.getBoundingClientRect();if(u.dir!=="rtl"){const S=te.left-V.left,P=J.left-S,R=C.left-P,X=C.width+R,Ne=Math.max(X,V.width),re=window.innerWidth-Z,fe=Qe(P,[Z,Math.max(Z,re-Ne)]);c.style.minWidth=X+"px",c.style.left=fe+"px"}else{const S=V.right-te.right,P=window.innerWidth-J.right-S,R=window.innerWidth-C.right-P,X=C.width+R,Ne=Math.max(X,V.width),re=window.innerWidth-Z,fe=Qe(P,[Z,Math.max(Z,re-Ne)]);c.style.minWidth=X+"px",c.style.right=fe+"px"}const G=T(),L=window.innerHeight-Z*2,F=p.scrollHeight,$=window.getComputedStyle(f),Q=parseInt($.borderTopWidth,10),I=parseInt($.paddingTop,10),O=parseInt($.borderBottomWidth,10),Y=parseInt($.paddingBottom,10),U=Q+I+F+Y+O,ye=Math.min(h.offsetHeight*5,U),se=window.getComputedStyle(p),ve=parseInt(se.paddingTop,10),be=parseInt(se.paddingBottom,10),ae=C.top+C.height/2-Z,xe=L-ae,oe=h.offsetHeight/2,x=h.offsetTop+oe,E=Q+I+x,_=U-E;if(E<=ae){const S=G.length>0&&h===G[G.length-1].ref.current;c.style.bottom="0px";const P=f.clientHeight-p.offsetTop-p.offsetHeight,R=Math.max(xe,oe+(S?be:0)+P+O),X=E+R;c.style.height=X+"px"}else{const S=G.length>0&&h===G[0].ref.current;c.style.top="0px";const R=Math.max(ae,Q+p.offsetTop+(S?ve:0)+oe)+_;c.style.height=R+"px",p.scrollTop=E-ae+p.offsetTop}c.style.margin=`${Z}px 0`,c.style.minHeight=ye+"px",c.style.maxHeight=L+"px",i?.(),requestAnimationFrame(()=>N.current=!0)}},[T,u.trigger,u.valueNode,c,f,p,h,w,u.dir,i]);ie(()=>g(),[g]);const[K,D]=r.useState();ie(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const q=r.useCallback(C=>{C&&j.current===!0&&(g(),m?.(),j.current=!1)},[g,m]);return e.jsx(Po,{scope:o,contentWrapper:c,shouldExpandOnScrollRef:N,onScrollButtonChange:q,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:K},children:e.jsx(H.div,{...a,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});St.displayName=Io;var Eo="SelectPopperPosition",De=r.forwardRef((s,t)=>{const{__scopeSelect:o,align:i="start",collisionPadding:a=Z,...u}=s,l=Pe(o);return e.jsx(hs,{...l,...u,ref:t,align:i,collisionPadding:a,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});De.displayName=Eo;var[Po,$e]=ge(me,{}),Le="SelectViewport",jt=r.forwardRef((s,t)=>{const{__scopeSelect:o,nonce:i,...a}=s,u=pe(Le,o),l=$e(Le,o),c=ee(t,u.onViewportChange),d=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Ie.Slot,{scope:o,children:e.jsx(H.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:A(a.onScroll,f=>{const y=f.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:T}=l;if(T?.current&&v){const N=Math.abs(d.current-y.scrollTop);if(N>0){const j=window.innerHeight-Z*2,p=parseFloat(v.style.minHeight),h=parseFloat(v.style.height),w=Math.max(p,h);if(w<j){const m=w+N,g=Math.min(j,m),K=m-g;v.style.height=g+"px",v.style.bottom==="0px"&&(y.scrollTop=K>0?K:0,v.style.justifyContent="flex-end")}}}d.current=y.scrollTop})})})]})});jt.displayName=Le;var Tt="SelectGroup",[Ro,_o]=ge(Tt),Ao=r.forwardRef((s,t)=>{const{__scopeSelect:o,...i}=s,a=Ve();return e.jsx(Ro,{scope:o,id:a,children:e.jsx(H.div,{role:"group","aria-labelledby":a,...i,ref:t})})});Ao.displayName=Tt;var Ct="SelectLabel",It=r.forwardRef((s,t)=>{const{__scopeSelect:o,...i}=s,a=_o(Ct,o);return e.jsx(H.div,{id:a.id,...i,ref:t})});It.displayName=Ct;var Ce="SelectItem",[Oo,Et]=ge(Ce),Pt=r.forwardRef((s,t)=>{const{__scopeSelect:o,value:i,disabled:a=!1,textValue:u,...l}=s,c=de(Ce,o),d=pe(Ce,o),f=c.value===i,[y,v]=r.useState(u??""),[T,N]=r.useState(!1),j=ee(t,m=>d.itemRefCallback?.(m,i,a)),p=Ve(),h=r.useRef("touch"),w=()=>{a||(c.onValueChange(i),c.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Oo,{scope:o,value:i,disabled:a,textId:p,isSelected:f,onItemTextChange:r.useCallback(m=>{v(g=>g||(m?.textContent??"").trim())},[]),children:e.jsx(Ie.ItemSlot,{scope:o,value:i,disabled:a,textValue:y,children:e.jsx(H.div,{role:"option","aria-labelledby":p,"data-highlighted":T?"":void 0,"aria-selected":f&&T,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:j,onFocus:A(l.onFocus,()=>N(!0)),onBlur:A(l.onBlur,()=>N(!1)),onClick:A(l.onClick,()=>{h.current!=="mouse"&&w()}),onPointerUp:A(l.onPointerUp,()=>{h.current==="mouse"&&w()}),onPointerDown:A(l.onPointerDown,m=>{h.current=m.pointerType}),onPointerMove:A(l.onPointerMove,m=>{h.current=m.pointerType,a?d.onItemLeave?.():h.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:A(l.onPointerLeave,m=>{m.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:A(l.onKeyDown,m=>{d.searchRef?.current!==""&&m.key===" "||(yo.includes(m.key)&&w(),m.key===" "&&m.preventDefault())})})})})});Pt.displayName=Ce;var Se="SelectItemText",Rt=r.forwardRef((s,t)=>{const{__scopeSelect:o,className:i,style:a,...u}=s,l=de(Se,o),c=pe(Se,o),d=Et(Se,o),f=wo(Se,o),[y,v]=r.useState(null),T=ee(t,w=>v(w),d.onItemTextChange,w=>c.itemTextRefCallback?.(w,d.value,d.disabled)),N=y?.textContent,j=r.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:N},d.value),[d.disabled,d.value,N]),{onNativeOptionAdd:p,onNativeOptionRemove:h}=f;return ie(()=>(p(j),()=>h(j)),[p,h,j]),e.jsxs(e.Fragment,{children:[e.jsx(H.span,{id:d.textId,...u,ref:T}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?st.createPortal(u.children,l.valueNode):null]})});Rt.displayName=Se;var _t="SelectItemIndicator",At=r.forwardRef((s,t)=>{const{__scopeSelect:o,...i}=s;return Et(_t,o).isSelected?e.jsx(H.span,{"aria-hidden":!0,...i,ref:t}):null});At.displayName=_t;var Fe="SelectScrollUpButton",Ot=r.forwardRef((s,t)=>{const o=pe(Fe,s.__scopeSelect),i=$e(Fe,s.__scopeSelect),[a,u]=r.useState(!1),l=ee(t,i.onScrollButtonChange);return ie(()=>{if(o.viewport&&o.isPositioned){let c=function(){const f=d.scrollTop>0;u(f)};const d=o.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[o.viewport,o.isPositioned]),a?e.jsx(Mt,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=o;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Ot.displayName=Fe;var Ue="SelectScrollDownButton",kt=r.forwardRef((s,t)=>{const o=pe(Ue,s.__scopeSelect),i=$e(Ue,s.__scopeSelect),[a,u]=r.useState(!1),l=ee(t,i.onScrollButtonChange);return ie(()=>{if(o.viewport&&o.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,y=Math.ceil(d.scrollTop)<f;u(y)};const d=o.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[o.viewport,o.isPositioned]),a?e.jsx(Mt,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=o;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});kt.displayName=Ue;var Mt=r.forwardRef((s,t)=>{const{__scopeSelect:o,onAutoScroll:i,...a}=s,u=pe("SelectScrollButton",o),l=r.useRef(null),c=Ee(o),d=r.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return r.useEffect(()=>()=>d(),[d]),ie(()=>{c().find(y=>y.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),e.jsx(H.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:A(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(i,50))}),onPointerMove:A(a.onPointerMove,()=>{u.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(i,50))}),onPointerLeave:A(a.onPointerLeave,()=>{d()})})}),ko="SelectSeparator",Dt=r.forwardRef((s,t)=>{const{__scopeSelect:o,...i}=s;return e.jsx(H.div,{"aria-hidden":!0,...i,ref:t})});Dt.displayName=ko;var We="SelectArrow",Mo=r.forwardRef((s,t)=>{const{__scopeSelect:o,...i}=s,a=Pe(o),u=de(We,o),l=pe(We,o);return u.open&&l.position==="popper"?e.jsx(gs,{...a,...i,ref:t}):null});Mo.displayName=We;var Do="SelectBubbleInput",Lt=r.forwardRef(({__scopeSelect:s,value:t,...o},i)=>{const a=r.useRef(null),u=ee(i,a),l=ho(t);return r.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==t&&y){const v=new Event("change",{bubbles:!0});y.call(c,t),c.dispatchEvent(v)}},[l,t]),e.jsx(H.select,{...o,style:{...ds,...o.style},ref:u,defaultValue:t})});Lt.displayName=Do;function Ft(s){return s===""||s===void 0}function Ut(s){const t=ms(s),o=r.useRef(""),i=r.useRef(0),a=r.useCallback(l=>{const c=o.current+l;t(c),function d(f){o.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),u=r.useCallback(()=>{o.current="",window.clearTimeout(i.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(i.current),[]),[o,a,u]}function Wt(s,t,o){const a=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,u=o?s.indexOf(o):-1;let l=Lo(s,Math.max(u,0));a.length===1&&(l=l.filter(f=>f!==o));const d=l.find(f=>f.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==o?d:void 0}function Lo(s,t){return s.map((o,i)=>s[(t+i)%s.length])}var Fo=mt,Bt=ft,Uo=gt,Wo=yt,Bo=vt,Ht=bt,Ho=jt,Vt=It,$t=Pt,Vo=Rt,$o=At,zt=Ot,Kt=kt,qt=Dt;const Je=Fo,et=Uo,Be=r.forwardRef(({className:s,children:t,...o},i)=>e.jsxs(Bt,{ref:i,className:B("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[t,e.jsx(Wo,{asChild:!0,children:e.jsx(it,{className:"h-4 w-4 opacity-50"})})]}));Be.displayName=Bt.displayName;const Gt=r.forwardRef(({className:s,...t},o)=>e.jsx(zt,{ref:o,className:B("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ys,{className:"h-4 w-4"})}));Gt.displayName=zt.displayName;const Qt=r.forwardRef(({className:s,...t},o)=>e.jsx(Kt,{ref:o,className:B("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(it,{className:"h-4 w-4"})}));Qt.displayName=Kt.displayName;const He=r.forwardRef(({className:s,children:t,position:o="popper",...i},a)=>e.jsx(Bo,{children:e.jsxs(Ht,{ref:a,className:B("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,...i,children:[e.jsx(Gt,{}),e.jsx(Ho,{className:B("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Qt,{})]})}));He.displayName=Ht.displayName;const zo=r.forwardRef(({className:s,...t},o)=>e.jsx(Vt,{ref:o,className:B("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));zo.displayName=Vt.displayName;const z=r.forwardRef(({className:s,children:t,...o},i)=>e.jsxs($t,{ref:i,className:B("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($o,{children:e.jsx($s,{className:"h-4 w-4"})})}),e.jsx(Vo,{children:t})]}));z.displayName=$t.displayName;const Ko=r.forwardRef(({className:s,...t},o)=>e.jsx(qt,{ref:o,className:B("-mx-1 my-1 h-px bg-muted",s),...t}));Ko.displayName=qt.displayName;const qo={[M.PENDING]:"bg-amber-500/15 text-amber-300",[M.AWAITING_CONFIRMATION]:"bg-sky-500/15 text-sky-300",[M.CONFIRMED]:"bg-emerald-500/15 text-emerald-300",[M.COMPLETED]:"bg-emerald-500/15 text-emerald-300",[M.FAILED]:"bg-rose-500/15 text-rose-300",[M.CANCELED]:"bg-rose-500/15 text-rose-300"},Go=[10,25,50],Qo=[5,10,20];function vr(){const{user:s}=ys(),{t,language:o,setLanguage:i}=vs(),[a,u]=r.useState("history"),{data:l,isLoading:c,error:d,refetch:f}=io(),{data:y}=co(),[v,T]=r.useState(0),[N,j]=r.useState(50),[p,h]=r.useState("50"),[w,m]=r.useState("idle"),[g,K]=r.useState(!1),[D,q]=r.useState(!1),[C,V]=r.useState(18),[J,te]=r.useState("18"),[G,L]=r.useState("idle"),[F,$]=r.useState(!1),[Q,I]=r.useState(!1),[O,Y]=r.useState("all"),[U,ye]=r.useState("all"),[se,ve]=r.useState(""),be=bs(),[ae]=Ns(),{open:xe}=ws(),oe=s?`${s.first_name}${s.last_name?` ${s.last_name}`:""}`:t("profile.displayNameFallback"),x=s?.username?`@${s.username}`:t("profile.usernameFallback"),E=oe.split(" ").filter(Boolean).slice(0,2).map(n=>n[0]?.toUpperCase()).join(""),_=l?.balance,b=l?.topUpAddress??"—",S=l?.topUpMemo??"—",P=r.useMemo(()=>({page:1,limit:20,sort:"recent",order:"desc",status:O==="all"?void 0:O,type:U==="all"?void 0:U,q:se.trim()?se.trim():void 0}),[O,U,se]),R=fo(P),X=r.useMemo(()=>R.data?.pages.flatMap(n=>n.items)??[],[R.data]),Ne=R.isLoading||R.isFetching&&X.length===0,re=R.error instanceof Error?R.error:null;r.useEffect(()=>{l&&T(l.balance.available)},[l]),r.useEffect(()=>{y&&T(y.available)},[y]),r.useEffect(()=>{re&&ne.error(re.message)},[re]);const fe=n=>{h(n);const k=Number(n);Number.isFinite(k)&&j(k)},je=n=>{te(n);const k=Number(n);Number.isFinite(k)&&V(k)},ze=async()=>{if(!Number.isFinite(N)||N<=0){ne.error(t("profile.toastSelectValidTopUp"));return}if(!be){xe(),ne.info(t("profile.toastConnectWallet"));return}K(!0),m("pending");try{await ae.sendTransaction(Es({address:b,amountTon:N})),T(n=>Number((n+N).toFixed(2))),m("confirmed"),q(!1),ne.success(t("profile.toastTopUpConfirmed"))}catch(n){m("idle"),ne.error(n instanceof Error?n.message:t("profile.toastTopUpFailed"))}finally{K(!1)}},Yt=async()=>{if(!Number.isFinite(C)||C<=0){ne.error(t("profile.toastSelectValidWithdraw"));return}if(C>v){ne.error(t("profile.toastInsufficientBalance"));return}$(!0),L("pending");try{T(n=>Number(Math.max(n-C,0).toFixed(2))),L("confirmed"),I(!1),ne.success(t("profile.toastWithdrawSubmitted"))}catch(n){L("idle"),ne.error(n instanceof Error?n.message:t("profile.toastWithdrawFailed"))}finally{$(!1)}},Xt=Is({address:b,amountTon:N,memo:S}),Zt=n=>{try{return Ls(Fs(BigInt(n)))}catch{return n}},Jt=n=>he[n]??n,es=n=>we[n]??n,Ke=(n,k=6,le=4)=>n.length<=k+le?n:`${n.slice(0,k)}...${n.slice(-le)}`,ts=n=>n.description?n.description:n.dealId?`Deal: ${Ke(n.dealId)}`:n.externalTxHash?Ke(n.externalTxHash):"",ss=n=>[W.ESCROW_HOLD,W.ESCROW_RELEASE,W.ESCROW_REFUND].includes(n.type)?_e:n.direction===Te.IN?Ks:n.direction===Te.OUT?Gs:Xe,os=n=>{const k=Zt(n.amountNano);return`${n.direction===Te.OUT?"-":n.direction===Te.IN?"+":""}${k} ${n.currency}`};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[e.jsx(_s,{className:"py-6 space-y-6",children:c?e.jsx(Ge,{items:2}):d?e.jsx(Ps,{message:Rs(d,"Unable to load profile"),description:"Please reconnect your session and try again.",onRetry:()=>f()}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"glass p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(js,{className:"h-14 w-14",children:[e.jsx(Ts,{src:s?.photo_url,alt:oe}),e.jsx(Cs,{className:"bg-primary/15 text-primary text-lg font-semibold",children:E||"TG"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:oe}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x}),e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full bg-secondary/60 px-3 py-1 text-[11px] font-medium text-muted-foreground",children:[e.jsx(oo,{size:14,className:"text-primary/80"}),t("profile.connectedViaTelegram")]})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[340px_1fr]",children:[e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-20 lg:self-start",children:[e.jsxs("div",{className:"relative rounded-[28px] border border-border/40 bg-background/70 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-border/40 flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t("profile.walletSummary")}),e.jsx(Ss,{className:"shrink-0"})]}),e.jsxs("div",{className:"px-5 py-5 space-y-4 pb-6",children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.balanceLabel")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-2xl font-semibold text-foreground",children:[t("profile.availableBalance")," ",v.toFixed(2)," TON"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[t("profile.lockedInEscrow")," ",_?.locked??0," ","TON"]}),e.jsxs("span",{children:[t("profile.pendingRelease")," ",_?.pendingRelease??0," TON"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.lockedFundsNote")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",className:"button-primary rounded-lg py-2 text-sm",onClick:()=>{u("topup"),q(!0)},children:t("profile.topUp")}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-2 text-sm bg-primary/80 hover:bg-primary",onClick:()=>{u("withdraw"),I(!0)},children:t("profile.withdraw")})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.instantWithdraw")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:[_?.instantWithdraw?.toFixed(2)??"0.00"," TON"]}),e.jsx("button",{type:"button",className:"rounded-lg border border-border/40 px-3 py-1 text-xs text-muted-foreground",onClick:()=>{u("withdraw"),I(!0)},children:t("profile.withdrawNow")})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:t("profile.savedWallet")})]})]})]}),e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t("profile.language")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.languageDescription")})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"en",label:t("profile.languageOptionEnglish")},{value:"ru",label:t("profile.languageOptionRussian")}].map(n=>e.jsx("button",{type:"button",onClick:()=>i(n.value),className:`rounded-lg border px-3 py-1 text-xs transition ${o===n.value?"border-primary/60 bg-primary/20 text-primary":"border-border/40 text-muted-foreground hover:text-foreground"}`,children:n.label},n.value))})]})]}),e.jsxs("div",{className:"rounded-[28px] border border-border/40 bg-background/70 shadow-xl overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-border/40",children:e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:[{id:"history",label:t("profile.sectionHistory"),icon:eo},{id:"escrow",label:t("profile.sectionEscrow"),icon:_e}].map(({id:n,label:k,icon:le})=>e.jsxs("button",{type:"button",onClick:()=>{n==="topup"&&q(!0),u(n)},className:`inline-flex items-center gap-2 rounded-lg border px-3 py-1 text-xs font-medium transition ${a===n?"border-primary/60 bg-primary/15 text-primary":"border-border/40 text-muted-foreground hover:text-foreground"}`,children:[e.jsx(le,{size:14}),k]},n))})}),e.jsxs("div",{className:"px-5 py-5 space-y-4 pb-8",children:[a==="history"&&e.jsxs("div",{className:"glass p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t("profile.transactionHistory")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t("profile.last7Days")})]}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-[180px_180px_1fr]",children:[e.jsxs(Je,{value:O,onValueChange:n=>Y(n),children:[e.jsx(Be,{className:"h-10 rounded-lg bg-background/70",children:e.jsx(et,{placeholder:"Status"})}),e.jsxs(He,{children:[e.jsx(z,{value:"all",children:"All statuses"}),e.jsx(z,{value:M.PENDING,children:we[M.PENDING]}),e.jsx(z,{value:M.COMPLETED,children:we[M.COMPLETED]}),e.jsx(z,{value:M.FAILED,children:we[M.FAILED]}),e.jsx(z,{value:M.CANCELED,children:we[M.CANCELED]})]})]}),e.jsxs(Je,{value:U,onValueChange:n=>ye(n),children:[e.jsx(Be,{className:"h-10 rounded-lg bg-background/70",children:e.jsx(et,{placeholder:"Type"})}),e.jsxs(He,{children:[e.jsx(z,{value:"all",children:"All types"}),e.jsx(z,{value:W.DEPOSIT,children:he[W.DEPOSIT]}),e.jsx(z,{value:W.WITHDRAW,children:he[W.WITHDRAW]}),e.jsx(z,{value:W.ESCROW_HOLD,children:he[W.ESCROW_HOLD]}),e.jsx(z,{value:W.ESCROW_REFUND,children:he[W.ESCROW_REFUND]}),e.jsx(z,{value:W.FEE,children:he[W.FEE]})]})]}),e.jsx(Re,{value:se,onChange:n=>ve(n.target.value),placeholder:"Search transactions",className:"h-10 rounded-lg bg-background/70"})]}),re?e.jsx("p",{className:"text-xs text-rose-200",children:re.message}):null,Ne?e.jsx(Ge,{items:3}):X.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No transactions yet"}):e.jsx("div",{className:"space-y-3",children:X.map(n=>{const k=ss(n),le=ts(n);return e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-border/30 pb-3 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 inline-flex h-9 w-9 items-center justify-center rounded-full bg-secondary/60 text-muted-foreground",children:e.jsx(k,{size:16})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"rounded-full bg-secondary/60 px-2 py-0.5 text-[11px] text-muted-foreground",children:Jt(n.type)}),e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[11px] ${qo[n.status]??"bg-muted text-muted-foreground"}`,children:es(n.status)})]}),le?e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:le}):null,e.jsx("p",{className:"text-[11px] text-muted-foreground mt-1",children:Ds(n.createdAt,o)})]})]}),e.jsx("p",{className:"text-sm font-semibold text-foreground",children:os(n)})]},n.id)})}),R.hasNextPage?e.jsx("button",{type:"button",onClick:()=>R.fetchNextPage(),disabled:R.isFetchingNextPage,className:"w-full rounded-lg border border-border/40 px-3 py-2 text-xs font-semibold text-muted-foreground transition hover:text-foreground disabled:opacity-60",children:R.isFetchingNextPage?"Loading...":"Load more"}):null]}),a==="topup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.topUpBalance")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t("profile.tonAmount")}),e.jsxs("p",{className:"text-2xl font-semibold text-foreground",children:[N.toFixed(2)," TON"]})]}),e.jsx(no,{size:20,className:"text-primary/80"})]}),e.jsx("button",{type:"button",className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-1 text-xs text-primary/80 transition hover:border-primary/60 hover:bg-primary/20",onClick:()=>q(!0),children:"Change amount"})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.paymentMethod")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:t("profile.tonWallet")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.payUsing")})]}),e.jsx("span",{className:"rounded-full bg-secondary/60 px-3 py-1 text-[11px] text-muted-foreground",children:t("profile.selected")})]})]}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:ze,disabled:g,children:t(g?"profile.processing":"profile.proceedToPayment")}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.paymentInstructions")}),e.jsxs("div",{className:"space-y-1 text-sm text-foreground",children:[e.jsx("p",{children:Xt}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t("profile.address")," ",b]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t("profile.memo")," ",S]})]})]}),w==="pending"?e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-primary/30 bg-primary/10 px-4 py-3 text-xs text-primary",children:[e.jsx(Zs,{size:14}),t("profile.waitingConfirmation")]}):null,w==="confirmed"?e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-200",children:[e.jsx(Ye,{size:14}),t("profile.topUpConfirmed")]}):null]}),a==="withdraw"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.withdrawFunds")}),e.jsxs("p",{className:"text-2xl font-semibold text-foreground",children:[C.toFixed(2)," TON"]})]}),e.jsx("button",{type:"button",className:"rounded-lg border border-border/40 px-3 py-1 text-xs text-muted-foreground",onClick:()=>je(v.toFixed(2)),children:t("profile.max")})]}),e.jsx("button",{type:"button",className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-1 text-xs text-primary/80 transition hover:border-primary/60 hover:bg-primary/20",onClick:()=>I(!0),children:t("profile.changeAmount")})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.destinationWallet")}),e.jsx("p",{className:"text-sm text-foreground",children:"EQB7...m0fLr"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:t("profile.networkFeeEstimate")}),e.jsx("span",{children:"~0.05 TON"})]}),e.jsx("div",{className:"rounded-2xl border border-amber-400/30 bg-amber-500/10 px-4 py-3 text-xs text-amber-200",children:t("profile.withdrawWarning")}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:()=>I(!0),disabled:F,children:t(F?"profile.processing":"profile.withdrawAction")}),G==="confirmed"?e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-200",children:[e.jsx(Ye,{size:14}),t("profile.withdrawSubmitted")]}):null]}),a==="escrow"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground",children:[e.jsx(_e,{size:16,className:"text-primary/80"}),e.jsx("p",{className:"text-sm font-semibold",children:t("profile.howEscrowWorks")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("profile.escrowDescription")})]}),e.jsxs("div",{className:"glass p-4 space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t("profile.trustIndicators")}),e.jsx("div",{className:"grid gap-2",children:[t("profile.trustIndicatorTonNetwork"),t("profile.trustIndicatorOnChainVerification"),t("profile.trustIndicatorAutomatedEscrow"),t("profile.trustIndicatorSmartContractTransparency")].map(n=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-primary"}),e.jsx("span",{className:"text-foreground",children:n})]},n))})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Xe,{size:14,className:"text-primary/70"}),t("profile.automatedReleases")]})]})]})]})]})]})}),e.jsx(Ze,{open:D,onOpenChange:q,children:e.jsxs(Ae,{side:"bottom",className:"rounded-t-3xl border-t border-border/60 bg-background/95 px-5 pb-8 pt-6",children:[e.jsxs(Oe,{className:"text-left",children:[e.jsx(ke,{children:"Top up balance"}),e.jsx(Me,{children:"Enter the TON amount you want to add to your wallet."})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Amount (TON)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{type:"number",inputMode:"decimal",min:"0",step:"0.01",value:p,onChange:n=>fe(n.target.value),className:"h-12 rounded-2xl text-lg",placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"TON"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Go.map(n=>e.jsxs("button",{type:"button",onClick:()=>fe(n.toString()),className:`rounded-lg border px-3 py-1 text-xs transition ${N===n?"border-primary/60 bg-primary/20 text-primary":"border-primary/40 bg-primary/10 text-primary/80"}`,children:["+",n," TON"]},n))}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:ze,disabled:g,children:g?"Processing...":"Top up"})]})]})}),e.jsx(Ze,{open:Q,onOpenChange:I,children:e.jsxs(Ae,{side:"bottom",className:"rounded-t-3xl border-t border-border/60 bg-background/95 px-5 pb-8 pt-6",children:[e.jsxs(Oe,{className:"text-left",children:[e.jsx(ke,{children:t("profile.withdrawSheetTitle")}),e.jsx(Me,{children:t("profile.withdrawSheetDescription")})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:t("profile.tonAmount")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{type:"number",inputMode:"decimal",min:"0",step:"0.01",value:J,onChange:n=>je(n.target.value),className:"h-12 rounded-2xl text-lg",placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"TON"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Qo.map(n=>e.jsxs("button",{type:"button",onClick:()=>je(n.toString()),className:`rounded-lg border px-3 py-1 text-xs transition ${C===n?"border-primary/60 bg-primary/20 text-primary":"border-primary/40 bg-primary/10 text-primary/80"}`,children:[n," TON"]},n)),e.jsx("button",{type:"button",onClick:()=>je(v.toFixed(2)),className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-1 text-xs text-primary/80 transition hover:border-primary/60 hover:bg-primary/20",children:t("profile.max")})]}),e.jsx("button",{type:"button",className:"button-primary rounded-lg py-4 disabled:pointer-events-none disabled:opacity-70",onClick:Yt,disabled:F,children:t(F?"profile.processing":"profile.withdrawAction")})]})]})})]})}export{vr as default};
