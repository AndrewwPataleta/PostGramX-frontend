import{c as h,a as b,u as g,b as j,r as x,j as e,o as y,d as N}from"./index-BmMC9-4R.js";import{u as v,R as w,g as C,a as E}from"./useVerifyChannel-BTxQ62Im.js";import"./useMutation-CeyoxhXq.js";import"./channelsApi-BS8Ppocf.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],m=h("chevron-left",V),u=t=>t==null?"–":t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString(),M=()=>{const t=b(),{id:n}=g(),a=j(),[l,o]=x.useState(null),{mutateAsync:f,isPending:d}=v(),s=x.useMemo(()=>a.state?.channel??null,[a.state]),p=async()=>{if(n){o(null);try{const r=await f(n);if(r.status==="VERIFIED"){const c=s?{...s,status:"VERIFIED"}:void 0;t(`/channel-manage/${n}/overview`,{replace:!0,state:c?{channel:c}:void 0});return}const i=C(r,"Verification failed. Please check your bot permissions and retry.");o(i)}catch(r){const i=E(r,"Unable to verify the channel right now.");o(i),N.error(i)}}};return n?e.jsxs("div",{className:"mx-auto flex w-full max-w-2xl flex-col gap-6 px-4 py-6",children:[e.jsxs("button",{type:"button",onClick:()=>t(-1),className:"inline-flex items-center gap-2 text-xs font-semibold text-muted-foreground",children:[e.jsx(m,{size:14}),"Back"]}),e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Pending Verification"}),e.jsx("h1",{className:"mt-1 text-lg font-semibold text-foreground",children:s?.title||"Channel verification"}),s?.username?e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",s.username]}):null]}),e.jsx("span",{className:"rounded-full border border-yellow-500/40 bg-yellow-500/15 px-3 py-1 text-[11px] font-semibold text-yellow-200",children:"Pending"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl bg-muted/30 p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Members"}),e.jsx("p",{className:"mt-1 text-base font-semibold text-foreground",children:u(s?.memberCount)})]}),e.jsxs("div",{className:"rounded-xl bg-muted/30 p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg. Views"}),e.jsx("p",{className:"mt-1 text-base font-semibold text-foreground",children:u(s?.avgViews)})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/70 p-5 text-sm text-muted-foreground",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Finish verification"}),e.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-5 text-xs",children:[e.jsx("li",{children:"Add the PostGram bot as an admin in your channel."}),e.jsx("li",{children:"Enable the “Post messages” permission for the bot."}),e.jsx("li",{children:"Return here and retry verification."})]})]}),l?e.jsx("div",{className:"rounded-xl border border-destructive/40 bg-destructive/10 px-4 py-3 text-xs text-destructive",children:l}):null,e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{type:"button",onClick:p,disabled:d,className:"inline-flex items-center justify-center gap-2 rounded-full bg-primary px-4 py-3 text-sm font-semibold text-primary-foreground transition disabled:cursor-not-allowed disabled:opacity-70",children:[d?e.jsx(y,{size:16,className:"animate-spin"}):e.jsx(w,{size:16}),"Retry verification"]}),e.jsx("button",{type:"button",onClick:()=>t("/channels"),className:"inline-flex items-center justify-center rounded-full border border-border/60 bg-card/80 px-4 py-3 text-sm font-semibold text-foreground",children:"Back to channels"})]})]}):e.jsxs("div",{className:"mx-auto w-full max-w-2xl px-4 py-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Channel not found."}),e.jsxs("button",{type:"button",onClick:()=>t(-1),className:"mt-4 inline-flex items-center gap-2 text-xs font-semibold text-primary",children:[e.jsx(m,{size:14}),"Back"]})]})};export{M as default};
