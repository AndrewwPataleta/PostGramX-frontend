import{j as e,r as u,n as p,L as f}from"./index-erfFQ26N.js";import{D as h,f as b}from"./time-DVQDdvBj.js";import{a as j,g}from"./hooks-vg8mjcAx.js";import{L as y}from"./LoadingSkeleton-aA_aSaN_.js";import{E as N,g as v}from"./errors-Dd6aGCY5.js";import"./useQuery-D0bPNq33.js";import"./useMutation-D8v5ps9o.js";import"./mockChannels-BOQTRySQ.js";function w({name:s,username:d,verified:l,avatarUrl:r,price:o,statusLabel:a,statusTone:m,updatedLabel:c,ctaLabel:x,onSelect:t,onAction:n}){return e.jsxs("div",{className:`glass p-4 transition-colors ${t?"cursor-pointer hover:bg-card/60":""}`,role:t?"button":void 0,tabIndex:t?0:void 0,onClick:t,onKeyDown:i=>{t&&(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),t())},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-secondary/60 text-xl",children:r.startsWith("http")?e.jsx("img",{src:r,alt:s,className:"h-full w-full rounded-full object-cover"}):r}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[e.jsx("span",{children:s}),l?e.jsx("span",{className:"inline-flex h-4 w-4 items-center justify-center rounded-full bg-primary/20 text-[10px] text-primary",children:"âœ“"}):null]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["@",d]})]})]}),e.jsx(h,{label:a,tone:m})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsx("p",{className:"text-sm font-semibold text-foreground",children:o})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c})]}),e.jsx("button",{type:"button",onClick:i=>{i.stopPropagation(),n?.()},className:"mt-4 w-full rounded-xl bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground",children:x})]})}function $(){const[s,d]=u.useState("active"),l=p(),{data:r=[],isLoading:o,error:a,refetch:m}=j(s),c=r,x=!o&&c.length===0&&!a;return e.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"px-4 pt-4",children:[e.jsx("h1",{className:"text-base font-semibold text-foreground",children:"Deals"}),e.jsx("div",{className:"mt-3 border-t border-border/50",children:e.jsx("div",{className:"flex gap-6 bg-background/90 backdrop-blur-glass",children:["active","pending","completed"].map(t=>e.jsx("button",{onClick:()=>d(t),className:`py-3 font-medium text-sm border-b-2 transition-colors ${s===t?"text-primary border-b-primary":"text-muted-foreground border-b-transparent"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})})]}),e.jsx("div",{className:"px-4 py-6 space-y-4",children:o?e.jsx(y,{items:3}):a?e.jsx(N,{message:v(a,"Unable to load deals"),description:"Please check your connection and try again.",onRetry:()=>m()}):x?e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-3xl",children:"ðŸª„"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"No deals yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Start a new collaboration to see deals listed here."}),e.jsx(f,{to:"/marketplace",className:"inline-flex items-center justify-center rounded-full bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground",children:"Browse Marketplace"})]}):e.jsx("div",{className:"space-y-4",children:c.map(t=>{const n=g(t);return e.jsx(w,{name:t.channel.title,username:t.channel.username,verified:t.channel.isVerified,avatarUrl:t.channel.avatarUrl,statusLabel:n.label,statusTone:n.tone,price:`${t.priceTon} TON`,updatedLabel:b(t.updatedAt),ctaLabel:n.listAction,onSelect:()=>l(`/deals/${t.id}`),onAction:()=>l(`/deals/${t.id}`)},t.id)})})})]})}export{$ as default};
