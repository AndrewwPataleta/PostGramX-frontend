import{c as h,u as x,a as f,r as d,R as a,j as e}from"./index-8nc-CHX_.js";import{B as i}from"./button-qaxtu13T.js";import{C as N,a as p}from"./card-RdyyWPEd.js";import{u as C}from"./useAddChannelFlow-yQiqi11h.js";import{a as g,C as S}from"./channels-CCH0-4EZ.js";import{C as E}from"./circle-check-BfePhDrN.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],j=h("circle-x",A),T=()=>{const n=x(),{t}=f(),{state:r}=C(),s=r.preview;d.useEffect(()=>{if(!s){n(a.ADD_CHANNEL_STEP("step-1"),{replace:!0});return}r.verifyStatus==="idle"&&n(a.ADD_CHANNEL_STEP("step-2"),{replace:!0})},[n,s,r.verifyStatus]);const m=d.useMemo(()=>s?.username?s.username.startsWith("@")?s.username:`@${s.username}`:t("common.emptyValue"),[s?.username,t]),l=r.verifyStatus==="success",u=r.lastError||t("channels.add.step3.defaultError"),c=r.linkedChannelId,o=s&&c?{id:c,username:(s.username||s.normalizedUsername||"").replace(/^@/,""),title:s.title||t("channels.untitled"),status:S.VERIFIED,telegramChatId:s.telegramChatId??null,memberCount:s.memberCount??null,verifiedAt:new Date().toISOString(),lastCheckedAt:new Date().toISOString(),membership:{role:g.OWNER,telegramAdminStatus:"administrator",lastRecheckAt:new Date().toISOString()}}:null;return s?e.jsxs("div",{className:"flex flex-1 flex-col gap-5",children:[e.jsx(N,{className:"border-border/60 bg-card/80 shadow-sm",children:e.jsxs(p,{className:"flex flex-col items-center gap-3 p-6 text-center",children:[e.jsx("div",{className:`flex h-16 w-16 items-center justify-center rounded-full ${l?"bg-emerald-500/20 text-emerald-400":"bg-destructive/15 text-destructive"}`,children:l?e.jsx(E,{className:"h-8 w-8"}):e.jsx(j,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-foreground",children:t(l?"channels.add.step3.successTitle":"channels.add.step3.failedTitle")}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[s.title," Â· ",m]})]}),l?null:e.jsx("p",{className:"text-xs text-muted-foreground",children:u})]})}),e.jsx("div",{className:"mt-auto flex flex-col gap-3",children:l?e.jsxs(e.Fragment,{children:[e.jsx(i,{onClick:()=>n(a.CHANNELS),className:"w-full text-sm font-semibold",children:t("channels.add.step3.goToChannels")}),e.jsx(i,{variant:"secondary",onClick:()=>c?n(a.CHANNEL_MANAGE_LISTINGS(c),{state:o?{channel:o,rootBackTo:a.CHANNELS}:{rootBackTo:a.CHANNELS}}):void 0,className:"w-full text-sm font-semibold",disabled:!c,children:t("channels.add.step3.manageChannel")})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{onClick:()=>n(a.ADD_CHANNEL_STEP("step-2")),className:"w-full text-sm font-semibold",children:t("channels.add.step3.retryVerification")}),e.jsx(i,{variant:"secondary",onClick:()=>n(a.CHANNELS),className:"w-full text-sm font-semibold",children:t("channels.add.step3.backToChannels")})]})})]}):null};export{T as default};
