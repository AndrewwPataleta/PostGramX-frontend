import{u as l}from"./useQuery-BW4eWhkR.js";import{p as a,e as o}from"./index-QMRtKup0.js";import{u as s}from"./useMutation-upc-_kQt.js";const n=e=>({items:Array.isArray(e?.items)?e?.items:[],page:typeof e?.page=="number"?e.page:1,limit:typeof e?.limit=="number"?e.limit:10,total:typeof e?.total=="number"?e.total:0}),c=async e=>a("/deals/create",e),d=async(e={})=>{const t={role:e.role??"all",pendingPage:e.pendingPage,pendingLimit:e.pendingLimit,activePage:e.activePage,activeLimit:e.activeLimit,completedPage:e.completedPage,completedLimit:e.completedLimit},i=await a("/deals/list",t);return{pending:n(i.pending),active:n(i.active),completed:n(i.completed)}},y=e=>l({queryKey:["deals",e.role??"all",e.pendingPage??1,e.activePage??1,e.completedPage??1],queryFn:()=>d(e),staleTime:2e4,refetchOnWindowFocus:!1}),g=()=>{const e=o();return s({mutationFn:t=>c(t),onSuccess:()=>{e.invalidateQueries({queryKey:["deals"]})}})};export{y as a,g as u};
