import{c as I,j as e,L as Q,X as S,r as u,u as U}from"./index-CH972seZ.js";import{f as V,n as K}from"./ton-ClBVV2oW.js";import{C as D}from"./check-DQr6TOF1.js";import{f as G,l as X}from"./tagOptions-DoUmU6u5.js";import{C as k}from"./chevron-down-D2fLk51h.js";import{S as E}from"./skeleton-DJ-BZlrY.js";import{E as B}from"./ErrorState-EmaaaMWu.js";import{g as q}from"./errors-3kY4UU5q.js";import{u as H}from"./useQuery-InBDXXN_.js";import{c as J}from"./channelsApi-Fvb3w7we.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Y=I("search",W);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],ee=I("sliders-horizontal",Z),P="Must be pre-approved",$=3,se=24,M=3,_=r=>{try{return BigInt(r)}catch{return null}};function re({channel:r}){const o=(r.listings??[]).filter(t=>t.isActive!==!1),d=o.length,l=o.reduce((t,x)=>{const s=_(x.priceNano);return s===null?t:t===null||s<t?s:t},null),j=l?V(K(l)):null,a=typeof r.subscribers=="number"?`${r.subscribers.toLocaleString()} subscribers`:null,i=new Set;let h=!1;o.forEach(t=>{t.tags.forEach(x=>{const s=x.trim();if(!(!s||s.length>se)){if(s.toLowerCase()===P.toLowerCase()){h=!0;return}i.add(s)}})});const y=[...h?[P]:[],...Array.from(i)],c=y.slice(0,$),N=Math.max(y.length-$,0),v=r.name?.[0]?.toUpperCase()??r.username?.[0]?.toUpperCase(),F=o.some(t=>t.allowEdits),w=o.some(t=>t.allowLinkTracking),m=o.some(t=>t.allowPinnedPlacement||t.pinDurationHours!==null),T=o.some(t=>t.requiresApproval),R=[...F?["Edits allowed"]:[],...w?["Tracking allowed"]:[],...m?["Pinned available"]:[],...T?["Pre-approval required"]:[]],A=R.slice(0,M),p=Math.max(R.length-M,0),C=o.filter(t=>t.contentRulesText?.trim()).reduce((t,x)=>{const s=_(x.priceNano);return s===null?t:!t||s<t.price?{listing:x,price:s}:t},null)?.listing.contentRulesText?.trim()??null,f=r.about??r.description,b=r.username?`@${r.username}`:null;return e.jsx(Q,{to:`/marketplace/channels/${r.id}`,state:{channel:r},className:"block rounded-2xl border border-border/50 bg-card/80 p-4 transition-colors hover:border-primary/40",children:e.jsxs("div",{className:"flex items-start gap-3",children:[r.avatarUrl?e.jsx("img",{src:r.avatarUrl,alt:r.name,className:"h-12 w-12 rounded-full object-cover"}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-secondary/60 text-xl",children:v??"?"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:r.name}),r.verified?e.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-primary/20 p-1",children:e.jsx(D,{size:12,className:"text-primary"})}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[b?e.jsx("span",{children:b}):null,b&&a?e.jsx("span",{children:"·"}):null,a?e.jsx("span",{children:a}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["From ",e.jsxs("span",{className:"font-semibold text-primary",children:[j??"--"," TON"]})]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[d," placements"]})]}),f?e.jsx("p",{className:"truncate text-xs text-muted-foreground",children:f}):null,y.length>0?e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] text-foreground",children:[c.map(t=>e.jsx("span",{className:`flex-none whitespace-nowrap rounded-full px-2.5 py-1 ${t===P?"bg-primary/20 text-primary":"bg-secondary/60"}`,children:t},t)),N>0?e.jsxs("span",{className:"flex-none whitespace-nowrap rounded-full bg-secondary/60 px-2.5 py-1 text-muted-foreground",children:["+",N]}):null]}):null,R.length>0?e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] text-muted-foreground",children:[A.map(t=>e.jsx("span",{className:"flex-none whitespace-nowrap rounded-full border border-border/60 px-2.5 py-1",children:t},t)),p>0?e.jsxs("span",{className:"flex-none whitespace-nowrap rounded-full border border-border/60 px-2.5 py-1 text-muted-foreground",children:["+",p]}):null]}):null,C?e.jsxs("p",{className:"mt-2 truncate text-xs text-muted-foreground",children:["Rules: ",C]}):null]})]})})}const te=({filters:r,onRemoveFilter:o})=>r.priceRange[0]>0||r.priceRange[1]<10||r.subscribersRange[0]>0||r.subscribersRange[1]<1e6||r.languages.length>0||r.categories.length>0||r.tags.length>0||r.verifiedOnly?e.jsx("div",{className:"px-4 py-3 bg-secondary/30 border-b border-border/30 space-y-2",children:e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[r.priceRange[0]>0||r.priceRange[1]<10?e.jsxs("button",{onClick:()=>o("priceRange"),className:"inline-flex items-center gap-1.5 bg-primary/20 hover:bg-primary/30 text-primary px-3 py-1.5 rounded-full text-xs font-medium transition-colors",children:["Price: ",r.priceRange[0].toFixed(1),"-",r.priceRange[1].toFixed(1)," TON",e.jsx(S,{size:14})]}):null,r.subscribersRange[0]>0||r.subscribersRange[1]<1e6?e.jsxs("button",{onClick:()=>o("subscribersRange"),className:"inline-flex items-center gap-1.5 bg-accent/20 hover:bg-accent/30 text-accent px-3 py-1.5 rounded-full text-xs font-medium transition-colors",children:["Subs: ",(r.subscribersRange[0]/1e3).toFixed(0),"K-",(r.subscribersRange[1]/1e3).toFixed(0),"K",e.jsx(S,{size:14})]}):null,r.verifiedOnly?e.jsxs("button",{onClick:()=>o("verifiedOnly"),className:"inline-flex items-center gap-1.5 bg-primary/20 hover:bg-primary/30 text-primary px-3 py-1.5 rounded-full text-xs font-medium transition-colors",children:["Verified Only",e.jsx(S,{size:14})]}):null,r.languages.map(l=>e.jsxs("button",{onClick:()=>o("languages",l),className:"inline-flex items-center gap-1.5 bg-primary/20 hover:bg-primary/30 text-primary px-3 py-1.5 rounded-full text-xs font-medium transition-colors",children:[l,e.jsx(S,{size:14})]},l)),r.categories.map(l=>e.jsxs("button",{onClick:()=>o("categories",l),className:"inline-flex items-center gap-1.5 bg-accent/20 hover:bg-accent/30 text-accent px-3 py-1.5 rounded-full text-xs font-medium transition-colors",children:[l,e.jsx(S,{size:14})]},l)),r.tags.map(l=>e.jsxs("button",{onClick:()=>o("tags",l),className:"inline-flex items-center gap-1.5 bg-secondary/70 hover:bg-secondary text-foreground px-3 py-1.5 rounded-full text-xs font-medium transition-colors",children:[l,e.jsx(S,{size:14})]},l))]})}):null,ne=["EN","RU","ES","AR","DE","Other"],ae=["Crypto","Finance","Gaming","Tech","Lifestyle","News"],oe=({isOpen:r,onClose:o,filters:d,onApply:l,onReset:j})=>{const[a,i]=u.useState(d),h=(s,n=1)=>new Intl.NumberFormat("en",{maximumFractionDigits:n}).format(s),y=s=>new Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(s),[c,N]=u.useState({pricing:!0,audience:!0,language:!1,category:!1,tags:!1,availability:!1,verification:!1}),[v,F]=u.useState(""),[w,m]=u.useState(""),T=G(X),R=[{label:"Any",range:[0,10]},{label:"0-1 TON",range:[0,1]},{label:"1-5 TON",range:[1,5]},{label:"5-10 TON",range:[5,10]}],A=[{label:"Any",range:[0,1e6]},{label:"0-10K",range:[0,1e4]},{label:"10-100K",range:[1e4,1e5]},{label:"100K-1M",range:[1e5,1e6]}];u.useEffect(()=>{i(d)},[d,r]);const p=s=>{N(n=>({...n,[s]:!n[s]}))},L=(s,n)=>{const g=[...a.priceRange];g[s]=n,i(O=>({...O,priceRange:g}))},C=(s,n)=>{const g=[...a.subscribersRange];g[s]=n,i(O=>({...O,subscribersRange:g}))},f=s=>{i(n=>({...n,languages:n.languages.includes(s)?n.languages.filter(g=>g!==s):[...n.languages,s]}))},b=s=>{i(n=>({...n,categories:n.categories.includes(s)?n.categories.filter(g=>g!==s):[...n.categories,s]}))},t=()=>{l(a),o()},x=()=>{j(),i({priceRange:[0,10],subscribersRange:[0,1e6],languages:[],categories:[],tags:[],verifiedOnly:!1,dateRange:["",""]})};return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:o}),e.jsxs("div",{className:"fixed inset-x-0 bottom-0 top-0 bg-card rounded-t-2xl z-50 animate-in slide-in-from-bottom-10 duration-300 flex flex-col h-[100dvh] sm:h-auto sm:top-auto sm:max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-card border-b border-border/50 px-4 py-4 flex items-center justify-between rounded-t-2xl shrink-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Filters"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-secondary rounded-lg transition-colors",children:e.jsx(S,{size:20,className:"text-foreground"})})]}),e.jsxs("div",{className:"px-4 py-4 space-y-4 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("pricing"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Pricing (TON)"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.pricing?"rotate-180":""}`})]}),c.pricing&&e.jsxs("div",{className:"px-3 space-y-3 pb-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(s=>e.jsx("button",{onClick:()=>i(n=>({...n,priceRange:s.range})),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${a.priceRange[0]===s.range[0]&&a.priceRange[1]===s.range[1]?"bg-primary text-primary-foreground":"bg-secondary text-foreground hover:bg-secondary/80"}`,children:s.label},s.label))}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsx("input",{type:"number",value:a.priceRange[0],onChange:s=>L(0,parseFloat(s.target.value)||0),className:"w-full min-w-0 flex-1 bg-input border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Min"}),e.jsx("input",{type:"number",value:a.priceRange[1],onChange:s=>L(1,parseFloat(s.target.value)||10),className:"w-full min-w-0 flex-1 bg-input border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Max"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h(a.priceRange[0])," -"," ",h(a.priceRange[1])," TON"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("audience"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Audience"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.audience?"rotate-180":""}`})]}),c.audience&&e.jsx("div",{className:"px-3 space-y-4 pb-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Subscribers"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:A.map(s=>e.jsx("button",{onClick:()=>i(n=>({...n,subscribersRange:s.range})),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${a.subscribersRange[0]===s.range[0]&&a.subscribersRange[1]===s.range[1]?"bg-primary text-primary-foreground":"bg-secondary text-foreground hover:bg-secondary/80"}`,children:s.label},s.label))}),e.jsxs("div",{className:"flex flex-col gap-2 mb-2 sm:flex-row",children:[e.jsx("input",{type:"number",value:a.subscribersRange[0],onChange:s=>C(0,parseInt(s.target.value)||0),className:"w-full min-w-0 flex-1 bg-input border border-border rounded-lg px-3 py-2 text-xs text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Min"}),e.jsx("input",{type:"number",value:a.subscribersRange[1],onChange:s=>C(1,parseInt(s.target.value)||1e6),className:"w-full min-w-0 flex-1 bg-input border border-border rounded-lg px-3 py-2 text-xs text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Max"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y(a.subscribersRange[0])," -"," ",y(a.subscribersRange[1])]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("language"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Language"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.language?"rotate-180":""}`})]}),c.language&&e.jsx("div",{className:"px-3 pb-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map(s=>e.jsx("button",{onClick:()=>f(s),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${a.languages.includes(s)?"bg-primary text-primary-foreground":"bg-secondary text-foreground hover:bg-secondary/80"}`,children:s},s))})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("category"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Category"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.category?"rotate-180":""}`})]}),c.category&&e.jsx("div",{className:"px-3 pb-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:ae.map(s=>e.jsx("button",{onClick:()=>b(s),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${a.categories.includes(s)?"bg-accent text-accent-foreground":"bg-secondary text-foreground hover:bg-secondary/80"}`,children:s},s))})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("tags"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Tags"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.tags?"rotate-180":""}`})]}),c.tags&&e.jsxs("div",{className:"px-3 pb-3 space-y-3",children:[e.jsx("input",{type:"text",value:v,onChange:s=>F(s.target.value),placeholder:"Search tags",className:"w-full rounded-lg border border-border bg-input px-3 py-2 text-sm text-foreground"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:w,onChange:s=>m(s.target.value),placeholder:"Add custom tag",className:"flex-1 rounded-lg border border-border bg-input px-3 py-2 text-sm text-foreground"}),e.jsx("button",{type:"button",onClick:()=>{const s=w.trim();s&&(i(n=>({...n,tags:n.tags.includes(s)?n.tags:[...n.tags,s]})),m(""))},className:"rounded-lg border border-primary/40 bg-primary/10 px-3 py-2 text-xs font-semibold text-primary",children:"Add"})]}),a.tags.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(s=>e.jsxs("button",{type:"button",onClick:()=>i(n=>({...n,tags:n.tags.filter(g=>g!==s)})),className:"rounded-full bg-secondary px-3 py-1 text-xs text-foreground hover:bg-secondary/80",children:[s," ×"]},s))}):null,e.jsx("div",{className:"flex flex-wrap gap-2",children:T.filter(s=>s.toLowerCase().includes(v.trim().toLowerCase())).map(s=>{const n=a.tags.includes(s);return e.jsx("button",{type:"button",onClick:()=>i(g=>({...g,tags:n?g.tags.filter(O=>O!==s):[...g.tags,s]})),className:`rounded-full border px-3 py-1 text-xs transition-colors ${n?"border-primary/60 bg-primary/20 text-primary":"border-border/60 bg-card text-muted-foreground hover:text-foreground"}`,children:s},s)})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("availability"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Availability"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.availability?"rotate-180":""}`})]}),c.availability&&e.jsxs("div",{className:"px-3 pb-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"From date"}),e.jsx("input",{type:"date",value:a.dateRange[0],onChange:s=>i(n=>({...n,dateRange:[s.target.value,n.dateRange[1]]})),className:"w-full bg-input border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"To date"}),e.jsx("input",{type:"date",value:a.dateRange[1],onChange:s=>i(n=>({...n,dateRange:[n.dateRange[0],s.target.value]})),className:"w-full bg-input border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>p("verification"),className:"w-full flex items-center justify-between p-3 hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Verification"}),e.jsx(k,{size:18,className:`text-muted-foreground transition-transform ${c.verification?"rotate-180":""}`})]}),c.verification&&e.jsx("div",{className:"px-3 pb-3",children:e.jsxs("label",{className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-secondary/50 rounded-lg transition-colors",children:[e.jsx("input",{type:"checkbox",checked:a.verifiedOnly,onChange:s=>i(n=>({...n,verifiedOnly:s.target.checked})),className:"w-5 h-5 bg-secondary border border-border rounded accent-primary cursor-pointer"}),e.jsx("span",{className:"text-foreground font-medium",children:"Verified channels only"})]})})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-card border-t border-border/50 px-4 py-4 space-y-3",children:[e.jsx("button",{onClick:t,className:"button-primary w-full py-3 text-base font-semibold",children:"Apply Filters"}),e.jsx("button",{onClick:x,className:"button-secondary w-full py-3 text-base font-semibold",children:"Reset"})]})]})]}):null},z={priceRange:[0,100],subscribersRange:[0,1e6],languages:[],categories:[],tags:[],verifiedOnly:!0,dateRange:["",""]},le={channels:r=>["channels",r]},ie=()=>{const[r,o]=u.useState(""),[d,l]=u.useState(""),[j,a]=u.useState(!1),[i,h]=u.useState(z),[y,c]=u.useState(1),[N]=u.useState(20),[v]=u.useState("recent"),[F]=u.useState("desc");u.useEffect(()=>{const f=window.setTimeout(()=>{l(r.trim())},300);return()=>{window.clearTimeout(f)}},[r]);const w=u.useMemo(()=>({q:d||void 0,verifiedOnly:i.verifiedOnly||void 0,page:y,limit:N,sort:v,order:F,includeListings:!0}),[d,i.verifiedOnly,N,F,y,v]),m=H({queryKey:le.channels(w),queryFn:()=>J.listChannels(w)});u.useEffect(()=>{m.error&&U.error(q(m.error,"Unable to load channels"))},[m.error]);const T=u.useMemo(()=>(m.data?.items??[]).filter(b=>(b.listings??[]).filter(x=>x.isActive!==!1).length>0),[m.data?.items]),R=(f,b)=>{h(t=>{switch(f){case"priceRange":return{...t,priceRange:z.priceRange};case"subscribersRange":return{...t,subscribersRange:z.subscribersRange};case"verifiedOnly":return{...t,verifiedOnly:!1};case"languages":return{...t,languages:t.languages.filter(x=>x!==b)};case"categories":return{...t,categories:t.categories.filter(x=>x!==b)};case"tags":return{...t,tags:t.tags.filter(x=>x!==b)};default:return t}})},A=()=>a(!0),p=()=>a(!1),L=f=>h(f),C=()=>h(z);return{state:{searchQuery:r,isFilterOpen:j,filters:i,isLoading:m.isLoading,error:m.error},computed:{channels:T},actions:{setSearchQuery:o,openFilters:A,closeFilters:p,applyFilters:L,resetFilters:C,removeFilter:R,refetch:()=>m.refetch(),setPage:c}}};function ye(){const{state:r,computed:o,actions:d}=ie();return e.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"px-4 pt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-semibold text-foreground",children:"Marketplace"}),e.jsxs("button",{type:"button",onClick:d.openFilters,className:"inline-flex items-center gap-2 rounded-full bg-secondary/60 px-3 py-1 text-xs text-muted-foreground",children:[e.jsx(ee,{size:14}),"Filters"]})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-border/60 bg-card px-3 py-2",children:[e.jsx(Y,{size:16,className:"text-muted-foreground"}),e.jsx("input",{value:r.searchQuery,onChange:l=>d.setSearchQuery(l.target.value),placeholder:"Search channels or @username",className:"flex-1 bg-transparent text-sm text-foreground placeholder:text-muted-foreground focus:outline-none"})]}),e.jsx(te,{filters:r.filters,onRemoveFilter:d.removeFilter})]}),e.jsxs("div",{className:"px-4 py-6 space-y-3",children:[r.isLoading?Array.from({length:5}).map((l,j)=>e.jsx("div",{className:"rounded-2xl border border-border/50 bg-card/80 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(E,{className:"h-4 w-40"}),e.jsx(E,{className:"h-3 w-24"}),e.jsx(E,{className:"h-3 w-32"})]}),e.jsx(E,{className:"h-4 w-16"})]})},`marketplace-skeleton-${j}`)):o.channels.map(l=>e.jsx(re,{channel:l},l.id)),!r.isLoading&&r.error?e.jsx(B,{message:q(r.error,"Unable to load channels"),description:"Please try again when you have a stable connection.",onRetry:d.refetch}):null,!r.isLoading&&!r.error&&o.channels.length===0?e.jsx("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-6 text-center text-sm text-muted-foreground",children:"No channels found. Try a new search."}):null]}),e.jsx(oe,{isOpen:r.isFilterOpen,onClose:d.closeFilters,filters:r.filters,onApply:d.applyFilters,onReset:d.resetFilters})]})}export{ye as default};
