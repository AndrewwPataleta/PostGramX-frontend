import{c as fe,r as a,l as G,m as me,j as n,n as he,o as ve,q as U,P as Y,s as w,A as K,t as q,v as xe,w as ge,D as Pe,C as ye,x as be,h as A}from"./index-CH_DjpCr.js";import{I as Ce}from"./input-Dw8uihfE.js";import{u as Ne,h as we,R as Re,a as je,F as _e}from"./Combination-D6LM0EEV.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Se=fe("calendar-days",De),Me=36e5,H=Symbol.for("constructDateFrom");function E(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&H in e?e[H](t):e instanceof Date?new e.constructor(t):new Date(t)}function B(e,t){return E(e,e)}function Oe(e,t,r){return E(e,+B(e)+t)}function Ae(e,t,r){return Oe(e,t*Me)}function ke(e,...t){const r=E.bind(null,t.find(o=>typeof o=="object"));return t.map(r)}function j(e,t){const r=B(e);return r.setHours(0,0,0,0),r}function W(e,t,r){const[o,s]=ke(r?.in,e,t);return+j(o)==+j(s)}var D="Popover",[Z,et]=ve(D,[G]),R=G(),[Ee,g]=Z(D),J=e=>{const{__scopePopover:t,children:r,open:o,defaultOpen:s,onOpenChange:c,modal:i=!1}=e,u=R(t),d=a.useRef(null),[h,f]=a.useState(!1),[m,p]=me({prop:o,defaultProp:s??!1,onChange:c,caller:D});return n.jsx(he,{...u,children:n.jsx(Ee,{scope:t,contentId:Ne(),triggerRef:d,open:m,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(N=>!N),[p]),hasCustomAnchor:h,onCustomAnchorAdd:a.useCallback(()=>f(!0),[]),onCustomAnchorRemove:a.useCallback(()=>f(!1),[]),modal:i,children:r})})};J.displayName=D;var Q="PopoverAnchor",Fe=a.forwardRef((e,t)=>{const{__scopePopover:r,...o}=e,s=g(Q,r),c=R(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:u}=s;return a.useEffect(()=>(i(),()=>u()),[i,u]),n.jsx(K,{...c,...o,ref:t})});Fe.displayName=Q;var X="PopoverTrigger",ee=a.forwardRef((e,t)=>{const{__scopePopover:r,...o}=e,s=g(X,r),c=R(r),i=U(t,s.triggerRef),u=n.jsx(Y.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":se(s.open),...o,ref:i,onClick:w(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?u:n.jsx(K,{asChild:!0,...c,children:u})});ee.displayName=X;var F="PopoverPortal",[Te,Ie]=Z(F,{forceMount:void 0}),te=e=>{const{__scopePopover:t,forceMount:r,children:o,container:s}=e,c=g(F,t);return n.jsx(Te,{scope:t,forceMount:r,children:n.jsx(q,{present:r||c.open,children:n.jsx(xe,{asChild:!0,container:s,children:o})})})};te.displayName=F;var C="PopoverContent",oe=a.forwardRef((e,t)=>{const r=Ie(C,e.__scopePopover),{forceMount:o=r.forceMount,...s}=e,c=g(C,e.__scopePopover);return n.jsx(q,{present:o||c.open,children:c.modal?n.jsx(He,{...s,ref:t}):n.jsx(Ve,{...s,ref:t})})});oe.displayName=C;var $e=ge("PopoverContent.RemoveScroll"),He=a.forwardRef((e,t)=>{const r=g(C,e.__scopePopover),o=a.useRef(null),s=U(t,o),c=a.useRef(!1);return a.useEffect(()=>{const i=o.current;if(i)return we(i)},[]),n.jsx(Re,{as:$e,allowPinchZoom:!0,children:n.jsx(re,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:w(e.onCloseAutoFocus,i=>{i.preventDefault(),c.current||r.triggerRef.current?.focus()}),onPointerDownOutside:w(e.onPointerDownOutside,i=>{const u=i.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;c.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:w(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ve=a.forwardRef((e,t)=>{const r=g(C,e.__scopePopover),o=a.useRef(!1),s=a.useRef(!1);return n.jsx(re,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(o.current||r.triggerRef.current?.focus(),c.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(o.current=!0,c.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=c.target;r.triggerRef.current?.contains(i)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.current&&c.preventDefault()}})}),re=a.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:c,disableOutsidePointerEvents:i,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,...m}=e,p=g(C,r),N=R(r);return je(),n.jsx(_e,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:c,children:n.jsx(Pe,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>p.onOpenChange(!1),children:n.jsx(ye,{"data-state":se(p.open),role:"dialog",id:p.contentId,...N,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ne="PopoverClose",Le=a.forwardRef((e,t)=>{const{__scopePopover:r,...o}=e,s=g(ne,r);return n.jsx(Y.button,{type:"button",...o,ref:t,onClick:w(e.onClick,()=>s.onOpenChange(!1))})});Le.displayName=ne;var ze="PopoverArrow",Ge=a.forwardRef((e,t)=>{const{__scopePopover:r,...o}=e,s=R(r);return n.jsx(be,{...s,...o,ref:t})});Ge.displayName=ze;function se(e){return e?"open":"closed"}var Ue=J,Ye=ee,Ke=te,ae=oe;const qe=Ue,Be=Ye,ce=a.forwardRef(({className:e,align:t="center",sideOffset:r=4,...o},s)=>n.jsx(Ke,{children:n.jsx(ae,{ref:s,align:t,sideOffset:r,className:A("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));ce.displayName=ae.displayName;const V=5,_=e=>e.toString().padStart(2,"0"),We=(e,t)=>{const r=new Date(e),o=t*60*1e3;return r.setTime(Math.ceil(r.getTime()/o)*o),r.setSeconds(0,0),r},O=(e,t)=>e<t?new Date(t):e,L=e=>e?new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(e):"",z=e=>`${e.getFullYear()}-${_(e.getMonth()+1)}-${_(e.getDate())}`,k=e=>`${_(e.getHours())}:${_(e.getMinutes())}`,Ze=(e,t)=>W(e,t)?k(t):"00:00";function tt({value:e,onChange:t}){const r=a.useMemo(()=>Ae(new Date,1),[]),o=a.useMemo(()=>We(r,V),[r]),s=a.useMemo(()=>j(o),[o]),[c,i]=a.useState(!1),[u,d]=a.useState("date"),[h,f]=a.useState(e),[m,p]=a.useState(""),[N,S]=a.useState("");a.useEffect(()=>{if(!c){f(e);return}d("date");const l=e?O(e,o):o;f(l),p(z(l)),S(k(l))},[c,e,o]);const ie=L(e),ue=l=>{if(!l)return;const[P,y,v]=l.split("-").map(de=>Number(de));if(!P||!y||!v)return;const b=h??o,x=new Date(b);x.setFullYear(P,y-1,v),x.setSeconds(0,0);const M=W(x,o)?o:j(x),$=O(x,M);f($),p(l),S(k($)),d("time")},le=l=>{if(!l)return;const[P,y]=l.split(":").map(M=>Number(M));if(Number.isNaN(P)||Number.isNaN(y))return;const v=h??o,b=new Date(v);b.setHours(P,y,0,0);const x=O(b,o);f(x),S(l),t(x),i(!1)},pe=a.useMemo(()=>z(s),[s]),T=a.useMemo(()=>{if(!m)return s;const[l,P,y]=m.split("-").map(b=>Number(b)),v=new Date(s);return v.setFullYear(l,(P||1)-1,y||1),v.setHours(0,0,0,0),v},[m,s]),I=a.useMemo(()=>Ze(T,o),[T,o]);return n.jsxs(qe,{open:c,onOpenChange:i,children:[n.jsx(Be,{asChild:!0,children:n.jsx("button",{type:"button",className:"w-full text-left",children:n.jsxs("div",{className:"relative",children:[n.jsx(Se,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-primary/80"}),n.jsx(Ce,{readOnly:!0,value:ie,placeholder:"Select date & time",className:"h-11 cursor-pointer rounded-xl border-primary/30 bg-background/70 pl-9 text-sm font-medium text-foreground shadow-[0_0_0_1px_hsl(var(--primary)/0.2)] transition focus-visible:ring-primary/40"})]})})}),n.jsxs(ce,{align:"start",side:"bottom",className:"w-[min(100vw-2rem,420px)] rounded-2xl border border-primary/20 bg-card/95 p-4 shadow-[0_20px_45px_-35px_hsl(var(--primary)/0.6)]",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-semibold text-primary/90",children:u==="date"?"Select date":"Select time"}),u==="time"&&n.jsx("button",{type:"button",className:"text-xs text-muted-foreground transition hover:text-foreground",onClick:()=>d("date"),children:"Back"})]}),u==="date"?n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-xs text-muted-foreground",children:"Date"}),n.jsx("input",{type:"date",value:m,min:pe,onChange:l=>ue(l.target.value),className:A("w-full rounded-xl border border-primary/20 bg-background/70 px-3 py-2 text-sm text-foreground","focus:outline-none focus:ring-2 focus:ring-primary/40")}),n.jsxs("p",{className:"text-[11px] text-muted-foreground/80",children:["Earliest: ",L(o)]})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-xs text-muted-foreground",children:"Time"}),n.jsx("input",{type:"time",value:N,step:V*60,min:I,onChange:l=>le(l.target.value),className:A("w-full rounded-xl border border-primary/20 bg-background/70 px-3 py-2 text-sm text-foreground","focus:outline-none focus:ring-2 focus:ring-primary/40")}),n.jsxs("p",{className:"text-[11px] text-muted-foreground/80",children:["Min time for this date: ",I]})]})]})]})}export{tt as S};
