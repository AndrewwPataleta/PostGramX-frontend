import{m as o,r as l,u as d,j as e,L as n}from"./index-D-AtSuze.js";import{u as m}from"./useQuery-B7gc_Kot.js";import{L as c}from"./ListingCard-DAAZI7H2.js";import{L as x}from"./LoadingSkeleton-CkcutUFK.js";import{l as g}from"./listingsApi-BoV6kLhl.js";import{g as p}from"./errors-3kY4UU5q.js";import"./ton-ClBVV2oW.js";import"./skeleton-D1E33nNw.js";const L=()=>{const{channel:s}=o(),t=m({queryKey:["listingsByChannel",s.id,{page:1,limit:3,onlyActive:!0,sort:"recent"}],queryFn:()=>g({channelId:s.id,page:1,limit:3,onlyActive:!0,sort:"recent"})});l.useEffect(()=>{t.error&&d.error(p(t.error,"Unable to load listings"))},[t.error]);const r=t.data?.items??[],a=r.length>0;return e.jsxs(e.Fragment,{children:[s.description?e.jsx("div",{className:"glass p-4 text-sm text-muted-foreground",children:s.description}):null,e.jsxs("div",{className:"glass p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Listings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your active ad offers"})]}),e.jsx(n,{to:`/channel-manage/${s.id}/listings`,className:"rounded-full bg-primary/20 px-3 py-1 text-xs font-semibold text-primary",children:"View all listings"})]}),t.isLoading?e.jsx(x,{items:2}):a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"space-y-3",children:r.map(i=>e.jsx(c,{listing:i,variant:"compact"},i.id))})}):e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/60 p-4 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"No listings yet"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Create your first listing to start receiving offers."}),e.jsx(n,{to:`/channel-manage/${s.id}/listings/create`,className:"mt-3 inline-flex items-center justify-center rounded-xl bg-primary px-4 py-2 text-xs font-semibold text-primary-foreground",children:"Create listing"})]})]})]})};export{L as default};
