import{u as g,r as a,j as e,L as p}from"./index-DaVbJbNF.js";import{L as h}from"./LoadingSkeleton-BGNnqncv.js";import{E as b,g as f}from"./errors-DUtJx6EL.js";import{u as j}from"./useMarketplaceChannelViewModel-ZbpaC_0S.js";import{C as N}from"./check-CDjuLB7d.js";import"./useQuery-tkaMelWP.js";import"./marketplaceRepository-FhvPdKpq.js";import"./mockChannels-BOQTRySQ.js";const i=r=>r>=168&&r%24===0?`${r/24}d`:`${r}h`;function E(){const{channelId:r}=g(),{state:s,actions:d}=j(r),[n,o]=a.useState("details"),c=a.useMemo(()=>{if(!s.channel?.listing)return null;const{availabilityFrom:t,availabilityTo:x}=s.channel.listing,m=new Date(t),u=new Date(x).getTime()-m.getTime(),l=Math.max(1,Math.ceil(u/(1e3*60*60*24)));return`Available next ${l} day${l===1?"":"s"}`},[s.channel?.listing]);return e.jsx("div",{className:"w-full max-w-2xl mx-auto",children:e.jsx("div",{className:"px-4 py-6 space-y-4",children:s.isLoading?e.jsx(h,{items:3}):s.error||!s.channel?e.jsx(b,{message:f(s.error,"Channel not found"),description:"We couldn't load this channel.",onRetry:d.refetch}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-6 text-center",children:[e.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-primary/10 text-4xl",children:s.channel.avatarUrl}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:s.channel.title}),s.channel.verified?e.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-primary/20 p-1",children:e.jsx(N,{size:14,className:"text-primary"})}):null]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",s.channel.username]}),e.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:s.channel.description})]}),e.jsx("div",{className:"border-b border-border/50 bg-card/80 backdrop-blur-glass px-4",children:e.jsx("div",{className:"flex gap-6",children:[{id:"details",label:"Details"},{id:"listings",label:"Listings"},{id:"settings",label:"Settings"}].map(t=>e.jsx("button",{type:"button",onClick:()=>o(t.id),className:`py-3 font-medium text-sm border-b-2 transition-colors ${n===t.id?"text-primary border-b-primary":"text-muted-foreground border-b-transparent hover:text-foreground"}`,children:t.label},t.id))})}),n==="details"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/80 p-4 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Subscribers"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-foreground",children:[(s.channel.subscribers/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/80 p-4 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg views"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-foreground",children:[(s.channel.averageViews/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/80 p-4 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-foreground",children:[s.channel.engagementRate,"%"]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-6",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pricing"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-semibold text-foreground",children:s.channel.priceTon}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"TON per post"})]}),e.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:"Pricing includes escrow protection and bot-assisted messaging."}),e.jsx(p,{to:`/marketplace/channels/${s.channel.id}/request`,className:"mt-5 inline-flex w-full items-center justify-center rounded-xl bg-primary px-4 py-3 text-sm font-semibold text-primary-foreground",children:"Request Placement"})]})]}):null,n==="listings"?s.channel.listing?e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Active listing"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c??"Availability updated recently"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-lg font-semibold text-primary",children:[s.channel.listing.priceTon," TON"]})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/70 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pinned"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-foreground",children:s.channel.listing.pinDurationHours?i(s.channel.listing.pinDurationHours):"Not pinned"})]}),e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/70 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Visible"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-foreground",children:i(s.channel.listing.visibilityDurationHours??24)})]})]}),s.channel.listing.tags.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 text-[11px] text-foreground",children:s.channel.listing.tags.map(t=>e.jsx("span",{className:"rounded-full border border-border/60 bg-card px-2.5 py-1",children:t},t))})]}):null,e.jsxs("div",{className:"rounded-xl border border-primary/20 bg-primary/5 p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-primary",children:"Content rules"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:s.channel.listing.contentRulesText||"No extra rules"})]})]}):e.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-6 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:"No listings yet"}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Create a listing to start receiving marketplace requests."})]}):null,n==="settings"?e.jsx("div",{className:"space-y-3",children:e.jsxs("button",{type:"button",className:"w-full glass p-4 rounded-lg flex items-center justify-between hover:bg-destructive/20 transition-colors text-left",children:[e.jsx("span",{className:"text-destructive font-medium",children:"Remove channel from marketplace"}),e.jsx("span",{className:"text-destructive",children:"â†’"})]})}):null]})})})}export{E as default};
