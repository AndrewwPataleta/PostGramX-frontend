import{r as o,j as h}from"./index-D-AtSuze.js";const a="addChannel.usernameOrLink",d="addChannel.preview",l="addChannel.channelId",i={usernameOrLink:"",normalizedUsername:"",preview:null,linkedChannelId:null,linkStatus:"idle",verifyStatus:"idle",lastError:null},u=t=>{if(typeof window>"u")return null;try{return window.sessionStorage.getItem(t)}catch{return null}},S=t=>{const r=u(t);if(!r)return null;try{return JSON.parse(r)}catch{return null}},w=o.createContext(void 0),C=({children:t})=>{const[r,s]=o.useState(()=>{const e=u(a)??i.usernameOrLink,n=S(d),c=u(l),f=n?.normalizedUsername??n?.username??i.normalizedUsername;return{...i,usernameOrLink:e,preview:n,linkedChannelId:c,normalizedUsername:f}});o.useEffect(()=>{if(!(typeof window>"u"))try{r.usernameOrLink?window.sessionStorage.setItem(a,r.usernameOrLink):window.sessionStorage.removeItem(a)}catch{return}},[r.usernameOrLink]),o.useEffect(()=>{if(!(typeof window>"u"))try{r.preview?window.sessionStorage.setItem(d,JSON.stringify(r.preview)):window.sessionStorage.removeItem(d)}catch{return}},[r.preview]),o.useEffect(()=>{if(!(typeof window>"u"))try{r.linkedChannelId?window.sessionStorage.setItem(l,r.linkedChannelId):window.sessionStorage.removeItem(l)}catch{return}},[r.linkedChannelId]);const m=o.useMemo(()=>({state:r,setUsernameOrLink:e=>s(n=>({...n,usernameOrLink:e})),setPreview:e=>s(n=>({...n,preview:e,normalizedUsername:e?.normalizedUsername??e?.username??""})),setLinkedChannelId:e=>s(n=>({...n,linkedChannelId:e})),setLinkStatus:e=>s(n=>({...n,linkStatus:e})),setVerifyStatus:e=>s(n=>({...n,verifyStatus:e})),setLastError:e=>s(n=>({...n,lastError:e})),resetFlow:()=>s(i)}),[r]);return h.jsx(w.Provider,{value:m,children:t})},E=()=>{const t=o.useContext(w);if(!t)throw new Error("useAddChannelFlow must be used within AddChannelFlowProvider");return t};export{C as A,E as u};
