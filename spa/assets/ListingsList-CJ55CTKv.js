import{c as y,m as j,b as v,r,u as N,j as e,L as x}from"./index-BVFfoKPu.js";import{u as C}from"./useQuery-DECTS7wu.js";import{L}from"./ListingCard-BeTlSyXu.js";import{L as M}from"./LoadingSkeleton-DJZ04xl6.js";import{l as P}from"./listingsApi-DIKDp0fN.js";import{g as k}from"./errors-3kY4UU5q.js";import"./ton-ClBVV2oW.js";import"./skeleton-BZVhub6W.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],w=y("square-pen",S),F=()=>{const{channel:g}=j(),{id:f}=v(),n=f??g.id,[o,a]=r.useState(1),[i]=r.useState(10),[l,u]=r.useState(!0),[d,h]=r.useState("recent"),s=C({queryKey:["listingsByChannel",n,{page:o,limit:i,onlyActive:l,sort:d}],queryFn:()=>P({channelId:n,page:o,limit:i,onlyActive:l,sort:d})});r.useEffect(()=>{s.error&&N.error(k(s.error,"Unable to load listings"))},[s.error]);const m=s.data?.items??[],p=s.data?.total??0,c=r.useMemo(()=>Math.max(1,Math.ceil(p/i)),[p,i]),b=m.length>0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex gap-2 rounded-full bg-secondary/40 p-1",children:[e.jsx("button",{type:"button",onClick:()=>{u(!0),a(1)},className:`rounded-full px-3 py-2 text-xs font-semibold transition-colors ${l?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"Active only"}),e.jsx("button",{type:"button",onClick:()=>{u(!1),a(1)},className:`rounded-full px-3 py-2 text-xs font-semibold transition-colors ${l?"text-muted-foreground hover:text-foreground":"bg-primary text-primary-foreground"}`,children:"All listings"})]}),e.jsxs("select",{value:d,onChange:t=>{h(t.target.value),a(1)},className:"rounded-full border border-border/60 bg-card px-3 py-2 text-xs text-foreground",children:[e.jsx("option",{value:"recent",children:"Most recent"}),e.jsx("option",{value:"price_asc",children:"Price: low to high"}),e.jsx("option",{value:"price_desc",children:"Price: high to low"})]})]}),s.isLoading?e.jsx(M,{items:3}):b?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:m.map(t=>e.jsx(L,{listing:t,variant:"full",actionSlot:e.jsxs(x,{to:`/channel-manage/${n}/listings/${t.id}/edit`,className:"flex-1 flex items-center justify-center gap-2 bg-secondary hover:bg-secondary/80 text-foreground font-medium py-2 rounded-lg border border-border transition-colors text-sm",children:[e.jsx(w,{size:16}),"Edit"]})},t.id))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Page ",o," of ",c]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>a(t=>Math.max(1,t-1)),disabled:o===1,className:"rounded-full border border-border/60 px-3 py-1 text-xs disabled:opacity-50",children:"Previous"}),e.jsx("button",{type:"button",onClick:()=>a(t=>Math.min(c,t+1)),disabled:o>=c,className:"rounded-full border border-border/60 px-3 py-1 text-xs disabled:opacity-50",children:"Next"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-secondary/30 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-xl",children:"ðŸ“‹"})}),e.jsx("p",{className:"text-foreground font-semibold mb-2",children:"No listings yet"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6",children:"Create your first listing to start receiving offers"}),e.jsx(x,{to:`/channel-manage/${n}/listings/create`,className:"inline-flex items-center justify-center rounded-xl bg-primary px-4 py-2 text-xs font-semibold text-primary-foreground",children:"Create listing"})]}),e.jsx(x,{to:`/channel-manage/${n}/listings/create`,className:"w-full button-primary py-3 text-base font-semibold text-center",children:"Create Listing"})]})};export{F as default};
