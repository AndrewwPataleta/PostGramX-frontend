import{c as m,a as u,r as c,j as e}from"./index-QMRtKup0.js";import{B as l}from"./button-CfP4rmFW.js";import{C as h,a as x}from"./card-DErqatRr.js";import{u as f}from"./useAddChannelFlow-IOXGrBrC.js";import{C as g}from"./circle-check-LzIS1HRn.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],v=m("circle-x",p),b=()=>{const s=u(),{state:a}=f(),t=a.preview;c.useEffect(()=>{if(!t){s("/add-channel/step-1",{replace:!0});return}a.verifyStatus==="idle"&&s("/add-channel/step-2",{replace:!0})},[s,t,a.verifyStatus]);const d=c.useMemo(()=>t?.username?t.username.startsWith("@")?t.username:`@${t.username}`:"—",[t?.username]),n=a.verifyStatus==="success",o=a.lastError||"We could not verify your admin rights. Please try again.",r=a.linkedChannelId,i=t&&r?{id:r,username:(t.username||t.normalizedUsername||"").replace(/^@/,""),title:t.title||"Untitled channel",status:"VERIFIED",telegramChatId:t.telegramChatId??null,memberCount:t.memberCount??null,avgViews:t.avgViews??null,verifiedAt:new Date().toISOString(),lastCheckedAt:new Date().toISOString(),membership:{role:"OWNER",telegramAdminStatus:"administrator",lastRecheckAt:new Date().toISOString()}}:null;return t?e.jsxs("div",{className:"flex flex-1 flex-col gap-5",children:[e.jsx(h,{className:"border-border/60 bg-card/80 shadow-sm",children:e.jsxs(x,{className:"flex flex-col items-center gap-3 p-6 text-center",children:[e.jsx("div",{className:`flex h-16 w-16 items-center justify-center rounded-full ${n?"bg-emerald-500/20 text-emerald-400":"bg-destructive/15 text-destructive"}`,children:n?e.jsx(g,{className:"h-8 w-8"}):e.jsx(v,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-foreground",children:n?"Channel verified":"Verification failed"}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[t.title," · ",d]})]}),n?null:e.jsx("p",{className:"text-xs text-muted-foreground",children:o})]})}),e.jsx("div",{className:"mt-auto flex flex-col gap-3",children:n?e.jsxs(e.Fragment,{children:[e.jsx(l,{onClick:()=>s("/channels"),className:"w-full text-sm font-semibold",children:"Go to My Channels"}),e.jsx(l,{variant:"secondary",onClick:()=>r?s(`/channel-manage/${r}/overview`,{state:i?{channel:i}:void 0}):void 0,className:"w-full text-sm font-semibold",disabled:!r,children:"Manage channel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{onClick:()=>s("/add-channel/step-2"),className:"w-full text-sm font-semibold",children:"Retry verification"}),e.jsx(l,{variant:"secondary",onClick:()=>s("/channels"),className:"w-full text-sm font-semibold",children:"Back to channels"})]})})]}):null};export{b as default};
