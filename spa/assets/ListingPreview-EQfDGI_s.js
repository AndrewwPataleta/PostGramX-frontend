import{d as s,m as i,r as o,b as n,j as t}from"./index-CY7JS-uu.js";import{u as l}from"./useQuery-DPUkYSXs.js";import{L as d}from"./ListingPreviewDetails-SMr6he4P.js";import{L as m}from"./LoadingSkeleton-DYaUhSxw.js";import{l as u}from"./listingsApi-Dey7XfNA.js";import{m as c}from"./managedChannels-FAMZ8sT_.js";import{g as x}from"./errors-3kY4UU5q.js";import{n as p}from"./ton-ClBVV2oW.js";import"./skeleton-FSO82CAS.js";function T(){const{id:a}=s(),r=i()?.channel??(a?c[a]:null),e=l({queryKey:["listingsByChannel",a,{page:1,limit:1,onlyActive:!0}],queryFn:()=>u({channelId:a??"",page:1,limit:1,onlyActive:!0,sort:"recent"}),enabled:!!a});return o.useEffect(()=>{e.error&&n.error(x(e.error,"Unable to load listing"))},[e.error]),r?t.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[t.jsxs("div",{className:"px-4 py-6 space-y-4",children:[e.isLoading?t.jsx(m,{items:1}):e.data?.items?.length?t.jsx(d,{priceTon:Number.parseFloat(p(e.data.items[0].priceNano))||0,format:"POST",pinDurationHours:e.data.items[0].pinDurationHours,visibilityDurationHours:e.data.items[0].visibilityDurationHours,allowEdits:e.data.items[0].allowEdits,allowLinkTracking:e.data.items[0].allowLinkTracking,allowPinnedPlacement:e.data.items[0].allowPinnedPlacement,tags:e.data.items[0].tags,requiresApproval:e.data.items[0].requiresApproval,additionalRequirementsText:e.data.items[0].contentRulesText??""}):t.jsx("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-4 text-sm text-muted-foreground",children:"No listings available to preview yet."}),t.jsxs("div",{className:"rounded-2xl border border-border/60 bg-card/80 p-4 text-sm text-muted-foreground",children:[t.jsx("p",{className:"font-medium text-foreground",children:"Preview state"}),t.jsx("p",{className:"mt-1",children:"This summary card is used across Marketplace and advertiser requests."})]})]}),t.jsx("div",{className:"h-20"})]}):t.jsx("div",{className:"w-full max-w-2xl mx-auto px-4 py-6",children:t.jsx("p",{className:"text-muted-foreground",children:"Channel not found"})})}export{T as default};
